"use strict";(globalThis["webpackChunkcolla_stock"]=globalThis["webpackChunkcolla_stock"]||[]).push([[91],{37091:(e,l,a)=>{a.r(l),a.d(l,{default:()=>k});var t=a(59835),s=a(86970);const r={class:"q-pa-md"};function o(e,l,a,o,i,n){const u=(0,t.up)("q-btn"),d=(0,t.up)("q-space"),m=(0,t.up)("q-toolbar"),c=(0,t.up)("q-input"),g=(0,t.up)("q-select"),p=(0,t.up)("q-form"),b=(0,t.up)("q-card"),f=(0,t.up)("q-page-container"),h=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(h,{id:"layout",style:(0,s.j5)(e.layoutStyle)},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t._)("div",r,["default"===e.subKind?((0,t.wg)(),(0,t.j4)(b,{key:0,class:"grad fixed-center q-pa-md",style:{width:"400px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"loginToolbar q-pa-none",style:{"margin-top":"auto","margin-bottom":"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{flat:"",round:"",icon:"photo",color:"primary",onClick:e.changeBackground},null,8,["onClick"]),(0,t.Wm)(d),(0,t.Wm)(u,{flat:"",icon:"person_add",color:"primary",onClick:l[0]||(l[0]=l=>e.subKind="register")})])),_:1}),(0,t.Wm)(p,{class:"q-gutter-md q-pa-md",ref:"frmLogin",onSubmit:e.login},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"c-field",filled:"",clearable:"",modelValue:e.loginData.connectAddress,"onUpdate:modelValue":l[1]||(l[1]=l=>e.loginData.connectAddress=l),"lazy-rules":"",rules:[l=>l&&l.length>0||e.$t("Please input connectAddress")],label:e.$t("Node Address")},null,8,["modelValue","rules","label"]),(0,t.Wm)(g,{class:"c-field",label:e.$t("Language"),filled:"",modelValue:e.loginData.language,"onUpdate:modelValue":l[2]||(l[2]=l=>e.loginData.language=l),"emit-value":"","map-options":"",options:e.languageOptions},null,8,["label","modelValue","options"]),(0,t.Wm)(c,{class:"c-field",filled:"",clearable:"",modelValue:e.loginData.credential_,"onUpdate:modelValue":l[3]||(l[3]=l=>e.loginData.credential_=l),label:e.$t("Credential")},null,8,["modelValue","label"]),(0,t.Wm)(c,{class:"c-field",filled:"",clearable:"",modelValue:e.loginData.password_,"onUpdate:modelValue":l[4]||(l[4]=l=>e.loginData.password_=l),type:"password",label:e.$t("Password"),"lazy-rules":""},null,8,["modelValue","label"]),(0,t._)("div",null,[(0,t.Wm)(u,{style:{width:"100%"},type:"submit",color:"primary",unelevated:"",label:e.$t("Login"),"no-caps":""},null,8,["label"]),(0,t.Wm)(u,{style:{width:"100%"},"no-caps":"",flat:"",label:e.$t("Reset"),type:"reset",color:"primary"},null,8,["label"])])])),_:1},8,["onSubmit"])])),_:1})):(0,t.kq)("",!0),"register"===e.subKind?((0,t.wg)(),(0,t.j4)(b,{key:1,class:"grad fixed-center q-pa-md",flat:"",style:{width:"400px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"loginToolbar q-pa-none",style:{"margin-top":"auto","margin-bottom":"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{flat:"",round:"",icon:"keyboard_arrow_left",onClick:l[5]||(l[5]=l=>e.subKind="default")}),(0,t.Wm)(d)])),_:1}),(0,t.Wm)(p,{class:"q-pa-none",ref:"frmRegister",onSubmit:e.register},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"c-field",filled:"",clearable:"",modelValue:e.registData.name,"onUpdate:modelValue":l[6]||(l[6]=l=>e.registData.name=l),"lazy-rules":"",rules:[l=>l&&l.length>0||e.$t("Please input Name")],label:e.$t("Name")},null,8,["modelValue","rules","label"]),(0,t.Wm)(c,{class:"c-field",filled:"",clearable:"",modelValue:e.registData.username,"onUpdate:modelValue":l[7]||(l[7]=l=>e.registData.username=l),"lazy-rules":"",rules:[l=>l&&l.length>0||e.$t("Please input UserName")],label:e.$t("UserName")},null,8,["modelValue","rules","label"]),(0,t.Wm)(c,{class:"c-field",filled:"",clearable:"",modelValue:e.registData.mobile,"onUpdate:modelValue":l[8]||(l[8]=l=>e.registData.mobile=l),"lazy-rules":"",rules:[l=>l&&l.length>0||e.$t("Please input Mobile")],label:e.$t("Mobile")},null,8,["modelValue","rules","label"]),(0,t.Wm)(c,{class:"c-field",filled:"",clearable:"",modelValue:e.registData.email,"onUpdate:modelValue":l[9]||(l[9]=l=>e.registData.email=l),"lazy-rules":"",rules:[l=>l&&l.length>0||e.$t("Please input Email")],label:e.$t("Email")},null,8,["modelValue","rules","label"]),(0,t.Wm)(c,{class:"c-field",type:"password",filled:"",clearable:"",modelValue:e.registData.plainPassword,"onUpdate:modelValue":l[10]||(l[10]=l=>e.registData.plainPassword=l),"lazy-rules":"",rules:[l=>l&&l.length>0||e.$t("Please input Password")],label:e.$t("Password")},null,8,["modelValue","rules","label"]),(0,t.Wm)(c,{class:"c-field",type:"password",filled:"",clearable:"",modelValue:e.registData.confirmPassword,"onUpdate:modelValue":l[11]||(l[11]=l=>e.registData.confirmPassword=l),"lazy-rules":"",rules:[l=>l&&l.length>0||e.$t("Please input ConfirmPassword")],label:e.$t("ConfirmPassword")},null,8,["modelValue","rules","label"]),(0,t.Wm)(u,{style:{width:"100%"},type:"submit",unelevated:"",color:"primary",label:e.$t("Register"),"no-caps":""},null,8,["label"])])),_:1},8,["onSubmit"])])),_:1})):(0,t.kq)("",!0)])])),_:1})])),_:1},8,["style"])}var i=a(711),n=a(76415),u=a(54963),d=a(91273),m=a(62942),c=a(28374),g=a(17779);const p=(0,t.aZ)({name:"login",data(){return{subKind:"default",loginData:{connectAddress:"https://localhost:9091",credential_:"13609619603",password_:"123456",language:"zh-CN"},registData:{name:"hujs",username:"胡劲松",plainPassword:"123456",confirmPassword:"123456",email:"hujs@colla.cc",mobile:"13609619603"},language:d.v.appParams.language,languageOptions:[],rules:{credential_:[{required:!0,message:"[(#{credential})]",trigger:"blur"}],password_:[{required:!0,message:"[(#{password})]",trigger:"blur"},{min:6,message:"[(#{password length})]",trigger:"blur"}]},bgNo:1}},validations:{form:{username:{required:n.C1},password:{required:n.C1}}},methods:{changeBackground(){let e=12;this.bgNo===e?this.bgNo=1:this.bgNo++},register:async function(){let e=await this.$refs.frmRegister.validate();if(!1!==e){this.setting();try{m.E.error="error";await m.E.regist("/user/Regist",this.registData);m.E.account?u.v.info(this.$t("Register successfully")):(g.error(m.E.error),u.v.warn(this.$t(m.E.error)))}catch(l){g.error(l),u.v.negative(l+"")}}else g.error("validate fail")},setting:function(){d.v.appParams.language=this.loginData.language,d.v.appParams.setConnectAddress(this.loginData.connectAddress),d.v.saveAppParams(),c.u.setDefalut("https")},async login(){let e=this.$router,l=await this.$refs.frmLogin.validate();if(!1!==l){this.setting();try{m.E.error="error";let l=await m.E.login("/user/Login",this.loginData);!0===m.E.loginStatus?(this.currentUser=l,e.push("/index/me")):(g.error(m.E.error),u.v.negative(this.$t(m.E.error)))}catch(a){g.error(a),u.v.negative(a+"")}}else g.error("validate fail")}},computed:{layoutStyle(){let e=(this.$q.dark.isActive?"wd-":"wl-")+this.bgNo;return'background:url("/images/login-bg-'+e+'.jpg") no-repeat center; background-size: cover;'}},setup(){const e=(0,i.useStore)(),l=(0,t.Fl)({get:()=>e.state.stock.user,set:l=>{e.commit("stock/updateUser",l)}});return{currentUser:l}}});var b=a(7683),f=a(77605),h=a(12133),w=a(44458),y=a(51663),V=a(68879),v=a(90136),D=a(8326),$=a(66611),q=a(92553),P=a(69984),W=a.n(P);const _=(0,b.Z)(p,[["render",o]]),k=_;W()(p,"components",{QLayout:f.Z,QPageContainer:h.Z,QCard:w.Z,QToolbar:y.Z,QBtn:V.Z,QSpace:v.Z,QForm:D.Z,QInput:$.Z,QSelect:q.Z})}}]);