"use strict";(globalThis["webpackChunkcolla_stock"]=globalThis["webpackChunkcolla_stock"]||[]).push([[64],{94630:(e,t,o)=>{o.d(t,{u:()=>l});var a=o(39188),r=o(51085),s=o(17779);class l{static split(e,t){let o={};for(let a=0;a<e.length;a++){let r=e[a],s=0,l="",i=[];for(let e of t){0==s&&(l=e);let t=r[e];t&&i.push(t),s++}let n=o[l];n||(n=[],o[l]=n),n.push(i);for(let e in r){let a=!1;for(let o of t)if(e===o){a=!0;break}if(a)continue;let s=r[e],l=o[e];l||(l=[],o[e]=l),l.push(s)}}return o}static calMA(e,t){for(var o=[],a=0,r=e.length;a<r;a++)if(a<t)o.push("-");else{for(var s=0,l=0;l<t;l++)s+=+e[a-l][1];o.push(s/t)}return o}static showChart(e,t,o,r){let l=document.getElementById(e);if(!l)return void s.error("domId:"+e+" is null");let i=a.S1(l,void 0,{renderer:"canvas"}),n={legend:{},dataZoom:[{type:"inside",throttle:"50",minValueSpan:6,start:0,end:100,zoomLock:!1}],dataset:{source:t},xAxis:{type:"category"},yAxis:{},series:o};for(let a in r)"datasource"!==a&&"series"!==a&&(n[a]=r[a]);return i.setOption(n),{chart:i,chartOption:n}}static showCandlestickChart(e,t,o,s,i,n){var d=document.getElementById(e),c=a.S1(d,void 0,{renderer:"canvas"});let p;const u="#ec0000",m="#8A0000",w="#00da3c",_="#008F28",h=l.split(t,["open","close","low","high"]);let g=[];i&&i.mas&&(g=i.mas),g&&0!==g.length||(g=["3","5","10","13","21","34","55"]);let f=["日K"],v=[];if(g&&g.length>0)for(let a of g){let e={name:"MA"+a,type:"line",data:h["ma"+a+"_close"],smooth:!0,showSymbol:!1,lineStyle:{opacity:1}};v.push(e),f.push("MA"+a)}let y={},b={};if(i&&(i.markPoint&&(y=i.markPoint),i.markLine&&(b=i.markLine)),p={title:{text:"",left:0},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:f},grid:[{left:"5%",right:"5%",height:"55%"},{left:"5%",right:"5%",top:"63%",height:"16%"},{left:"5%",right:"5%",top:"80%",height:"16%"}],xAxis:[{type:"category",data:h["trade_date"],boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax",axisPointer:{show:!0}},{type:"category",gridIndex:1,data:h["trade_date"],boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax",axisPointer:{type:"shadow",label:{show:!1},triggerTooltip:!0,handle:{show:!0,margin:30,color:"#B80C00"}}},{type:"category",gridIndex:2,data:h["trade_date"],boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax",axisPointer:{type:"shadow",label:{show:!1},triggerTooltip:!0,handle:{show:!0,margin:30,color:"#B80C00"}}}],yAxis:[{scale:!0,splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},{scale:!0,gridIndex:2,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],axisPointer:{link:[{xAxisIndex:[0,1,2]}]},dataZoom:[{type:"slider",realtime:!1,xAxisIndex:[0,1,2],start:0,end:100,top:30,height:20,zoomLock:!1,handleIcon:"path://M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"120%"},{show:!0,type:"slider",xAxisIndex:[0,1,2],start:0,end:100,top:30,height:20,zoomLock:!1},{show:!0,type:"slider",xAxisIndex:[0,1,2],start:0,end:100,top:30,height:20,zoomLock:!1}],series:[{name:"日K",type:"candlestick",data:h["open"],itemStyle:{color:u,color0:w,borderColor:m,borderColor0:_},markPoint:y,markLine:b},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:h["vol"]},{name:"MainNetInflow",type:"bar",xAxisIndex:2,yAxisIndex:2,data:h["main_net_inflow"]}]},p.series&&!r.pM.isArray(p.series)&&v.push(p.series),r.pM.isArray(p.series)){let e=p.series;v.push(...e)}if(o&&o.length>0)for(let a of o)v.push(a);p.series=v;for(let a in s)"datasource"!==a&&"series"!==a&&(p[a]=s[a]);return p&&c.setOption(p),c.on("dataZoom",(function(e){n&&n(e)})),{chart:c,chartOption:p}}static getMinMaxMarkPoint(){let e={label:{formatter:function(e){return null!=e?Math.round(e.value)+"":""}},data:[{name:"Mark",coord:["2013/5/31",2300],value:2300,itemStyle:{color:"rgb(41,60,85)"}},{name:"highest value",type:"max",valueDim:"highest"},{name:"lowest value",type:"min",valueDim:"lowest"},{name:"average value on close",type:"average",valueDim:"close"}],tooltip:{formatter:function(e){return e.name+"<br>"+(e.data.coord||"")}}},t={symbol:["none","none"],data:[[{name:"from lowest to highest",type:"min",valueDim:"lowest",symbol:"circle",symbolSize:10,label:{show:!1},emphasis:{label:{show:!1}}},{type:"max",valueDim:"highest",symbol:"circle",symbolSize:10,label:{show:!1},emphasis:{label:{show:!1}}}],{name:"min line on close",type:"min",valueDim:"close"},{name:"max line on close",type:"max",valueDim:"close"}]};return{markPoint:e,markLine:t}}static createMarkPoint(e,t){let o=[];for(let r=0;r<e.length;++r){let a=e[r][t],s={name:a["trade_date"],value:a,xAxis:a["trade_date"],yAxis:a};o.push(s)}let a={label:{formatter:function(e){return null!=e?Math.round(e.value)+"":""}},data:o,tooltip:{formatter:function(e){return e.name+"<br>"+(e.data.coord||"")}}};return a}static createMarkEffectScatter(e,t,o,a){let r={};for(let i=0;i<e.length;++i)r[e[i][o]]=e[i][a];let s=[];for(let i=0;i<t.length;++i){let e=r[t[i][o]];s.push(e)}let l=[{symbolSize:10,data:s,type:"effectScatter"}];return l}static createMarksEffectScatter(e,t,o,a){let r=[],s=Object.keys(e);0===s.length&&(e["none"]=[]);for(let l of Object.keys(e)){let s=e[l],i={};for(let e=0;e<s.length;++e)i[s[e][o]]=s[e][a];let n=[];for(let e=0;e<t.length;++e){let a=i[t[e][o]];n.push(a)}let d={name:l,symbolSize:10,data:n,type:"effectScatter"};r.push(d)}return r}}},47400:(e,t,o)=>{o.d(t,{k:()=>r});var a=o(51085);class r{sum;min;max;median;mean;stddev;mad;covs;cors;rsd;pca;std;minmax;data;colnames;constructor(e,t,o){if(this.data=e,t&&t.length>0)this.colnames=t;else{if(!(e&&e.length>0))throw new Error("NoColumns");this.colnames=a.QI.getNumberColumns(e[0],o)}}calSum(){if(!this.sum){this.sum={source:"sum"},this.min={source:"min"},this.max={source:"max"};for(let e=0;e<this.data.length;++e)for(let t=0;t<this.colnames.length;++t){let o=this.colnames[t],a=this.data[e][o];a||(a=0),0===e?(this.sum[o]=a,this.max[o]=a,this.min[o]=a):(this.sum[o]=this.sum[o]+a,a>this.max[o]&&(this.max[o]=a),a<this.min[o]&&(this.min[o]=a))}}}calMedian(){if(this.median)return this.median;this.calSum(),this.median=[],this.median[0]={source:"median1"},this.median[1]={source:"median2"},this.median[2]={source:"median3"};let e={};for(let t=0;t<this.data.length;++t)for(let o=0;o<this.colnames.length;++o){let a=this.colnames[o],r=this.data[t][a];r||(r=0),0===t&&(e[a]=[]),e[a][t]=r}for(let t=0;t<this.colnames.length;++t){let o=this.colnames[t],a=e[o];a&&(a.sort(),a.length%4==0?this.median[0][o]=(a[a.length/4-1]+a[a.length/4])/2:this.median[0][o]=a[Math.floor(a.length/4)],a.length%2==0?this.median[1][o]=(a[a.length/2-1]+a[a.length/2])/2:this.median[1][o]=a[Math.floor(a.length/2)],3*a.length%4==0?this.median[2][o]=(a[3*a.length/4-1]+a[3*a.length/4])/2:this.median[2][o]=a[Math.floor(a.length/2)])}return this.median}calMean(){if(this.mean)return this.mean;this.calSum(),this.mean={source:"mean"};for(let e=0;e<this.colnames.length;++e){let t=this.colnames[e],o=this.sum[t];this.mean[t]=o/this.data.length}return this.mean}calStddev(){if(this.stddev)return this.stddev;this.calMean(),this.stddev={source:"stddev"};for(let e=0;e<this.data.length;++e)for(let t=0;t<this.colnames.length;++t){let o=this.colnames[t],a=this.data[e][o];a||(a=0);let r=a-this.mean[o];this.stddev[o]=0===e?r*r:this.stddev[o]+r*r}for(let e=0;e<this.colnames.length;++e){let t=this.colnames[e];this.stddev[t]=Math.sqrt(this.stddev[t]/(this.data.length-1))}return this.stddev}calMad(){if(this.mad)return this.mad;this.calMedian(),this.mad={source:"mad"};let e={};for(let t=0;t<this.data.length;++t)for(let o=0;o<this.colnames.length;++o){let a=this.colnames[o],r=this.data[t][a];r||(r=0);let s=Math.abs(r-this.median[1][a]);0===t&&(e[a]=[]),e[a][t]=s}for(let t=0;t<this.colnames.length;++t){let o=this.colnames[t],a=e[o];a&&(a.sort(),a.length%2==0?this.mad[o]=(a[a.length/2-1]+a[a.length/2])/2:this.mad[o]=a[Math.floor(a.length/2)])}return this.mad}calRsd(){if(this.rsd)return this.rsd;this.calStddev(),this.rsd={source:"rsd"};for(let e=0;e<this.colnames.length;++e){let t=this.colnames[e];this.rsd[t]=this.stddev[t]/this.mean[t]}return this.rsd}calCov(e){if(this.covs){if(this.covs[e])return this.covs[e]}else this.covs={};this.covs[e]={source:"cov:"+e},this.calMean();let t=this.covs[e];for(let o=0;o<this.data.length;++o){let a=this.data[o][e];a||(a=0);for(let r=0;r<this.colnames.length;++r){let s=this.colnames[r],l=this.data[o][s];l||(l=0);let i=(a-this.mean[e])*(l-this.mean[s]);t[s]=0===o?i:t[s]+i}}for(let o=0;o<this.colnames.length;++o){let e=this.colnames[o];t[e]=t[e]/(this.data.length-1)}return t}calCor(e){if(this.cors){if(this.cors[e])return this.cors[e]}else this.cors={};this.cors[e]={source:"cor:"+e},this.calStddev();let t=this.calCov(e),o=this.cors[e],a=this.stddev[e];for(let r=0;r<this.colnames.length;++r){let e=this.colnames[r];o[e]=t[e]/(a*this.stddev[e])}return o}calPca(){if(this.pca)return this.pca;this.pca=[];for(let e=0;e<this.colnames.length;++e){let t=this.colnames[e],o=this.calCor(t);this.pca[e]=o}return this.pca}calStd(e){if(this.std)return this.std;this.std=[],this.calStddev();for(let t=0;t<this.data.length;++t)for(let o=0;o<this.colnames.length;++o){let a=this.colnames[o],r=this.data[t][a];r||(r=0);let s=(r-this.mean[a])/this.stddev[a];if(this.std[t]||(this.std[t]={}),!0===e){let e=3*this.stddev[1][a],t=r-this.mean[a];t<-e?s=(-e-this.mean[a])/this.stddev[a]:t>3*this.stddev[a]&&(s=(e-this.mean[a])/this.stddev[a])}this.std[t][a]=s}return this.std}calMinmax(e,t){if(this.minmax)return this.minmax;this.minmax=[],this.calSum();for(let o=0;o<this.data.length;++o)for(let a=0;a<this.colnames.length;++a){let r=this.colnames[a],s=this.data[o][r];s||(s=0);let l=this.max[r],i=this.min[r];if(l!==i&&!0===e){let e=.025*(l-i);l-=e,i=l+e,s<i?s=i:s>l&&(s=l)}let n=(s-i)/(this.max[r]-i);if(!this.minmax[o]){this.minmax[o]={};for(let e of t)this.minmax[o][e]=this.data[o][e]}this.minmax[o][r]=n}return this.minmax}}},41713:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Fs});var a=o(59835),r=o(86970);const s={class:"text-h6 text-primary",align:"center"},l=(0,a._)("div",{class:"q-pa-md"},null,-1);function i(e,t,o,i,n,d){const c=(0,a.up)("q-space"),p=(0,a.up)("q-btn"),u=(0,a.up)("q-toolbar"),m=(0,a.up)("q-tab"),w=(0,a.up)("q-tabs"),_=(0,a.up)("SelfSelection"),h=(0,a.up)("q-tab-panel"),g=(0,a.up)("ShareSearch"),f=(0,a.up)("q-toolbar-title"),v=(0,a.up)("LatestEvent"),y=(0,a.up)("HistoryEvent"),b=(0,a.up)("q-tab-panels");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,r.C_)(e.$q.dark.isActive?"footer_dark":"footer_normal")},[(0,a.Wm)(u,{class:"bg-c-grey-1",dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c),(0,a.Wm)(p,{class:"btnIcon",flat:"",round:"",dense:"",icon:"keyboard_arrow_left",onClick:e.previous},null,8,["onClick"]),(0,a._)("div",s,(0,r.zw)(e.share.name)+" "+(0,r.zw)(e.share.ts_code),1),(0,a.Wm)(p,{class:"btnIcon",flat:"",round:"",dense:"",icon:"keyboard_arrow_right",onClick:e.next},null,8,["onClick"]),(0,a.Wm)(c)])),_:1}),(0,a.Wm)(w,{class:"bg-c-grey-1 text-c-grey-10",modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),align:"right",dense:"","indicator-color":"primary","active-color":"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"selfselection",label:"自选"}),(0,a.Wm)(m,{name:"sharesearch",label:"股票"}),(0,a.Wm)(m,{name:"latestevent",label:"最新事件"}),(0,a.Wm)(m,{name:"historyevent",label:"历史事件"})])),_:1},8,["modelValue"])],2),(0,a.Wm)(b,{class:"bg-c-grey-1",modelValue:e.tab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tab=t),"keep-alive":"",animated:"","transition-prev":"slide-right","transition-next":"slide-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"q-pa-none",name:"selfselection"},{default:(0,a.w5)((()=>[(0,a.Wm)(_)])),_:1}),(0,a.Wm)(h,{class:"q-pa-none",name:"sharesearch"},{default:(0,a.w5)((()=>[(0,a.Wm)(g)])),_:1}),(0,a.Wm)(h,{class:"q-pa-none",name:"event"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"bg-c-grey-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"btnIcon",flat:"",round:"",dense:"",icon:"arrow_back",onClick:t[1]||(t[1]=t=>e.tab="selfselection")}),(0,a.Wm)(f,{class:"text-c-grey-10",align:"center"})])),_:1}),l])),_:1}),(0,a.Wm)(h,{class:"q-pa-none",name:"latestevent"},{default:(0,a.w5)((()=>[(0,a.Wm)(v)])),_:1}),(0,a.Wm)(h,{class:"q-pa-none",name:"historyevent"},{default:(0,a.w5)((()=>[(0,a.Wm)(y)])),_:1})])),_:1},8,["modelValue"])],64)}var n=o(711),d=o(61957);const c={class:"q-pa-md"},p={key:0},u={key:1},m={key:0},w={key:1},_={key:0},h={key:1},g={key:0},f={key:1},v={key:0},y={key:1},b={key:0},k={key:1},z={class:"q-pa-xs row items-start q-gutter-md"},q={class:"row"},W={class:"col"},x={class:"col"},U={class:"row"},C={class:"col"},S={class:"col"},F={class:"row"},Z={class:"col"},Q={class:"col"},V={class:"row"},$={class:"col"},G=(0,a._)("div",{class:"col"},null,-1),M={class:"row"},P={key:0,class:"col"},D={key:1,class:"col"},N={class:"row"},T={key:0,class:"col"},I={key:1,class:"col"},R={class:"row"},E={key:0,class:"col"},L={key:1,class:"col"},H={class:"row"},A={key:0,class:"col"},B={key:1,class:"col"},j={class:"row"},O={key:0,class:"col"},Y={key:1,class:"col"},K={class:"row"},X={key:0,class:"col"},J={key:1,class:"col"},ee={class:"row"},te={key:0,class:"col"},oe={key:1,class:"col"},ae={class:"row"},re={key:0,class:"col"},se={key:1,class:"col"},le={class:"row"},ie={key:0,class:"col"},ne={key:1,class:"col"},de={class:"q-pa-md"};function ce(e,t,o,s,l,i){const n=(0,a.up)("q-space"),ce=(0,a.up)("q-btn"),pe=(0,a.up)("q-toolbar"),ue=(0,a.up)("q-separator"),me=(0,a.up)("q-card-section"),we=(0,a.up)("q-input"),_e=(0,a.up)("q-card"),he=(0,a.up)("q-slide-transition"),ge=(0,a.up)("q-td"),fe=(0,a.up)("q-badge"),ve=(0,a.up)("q-tr"),ye=(0,a.up)("q-table"),be=(0,a.up)("q-option-group"),ke=(0,a.up)("q-card-actions"),ze=(0,a.up)("q-dialog"),qe=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(pe,{class:"bg-c-grey-0",dense:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n),(0,a.Wm)(ce,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a.Wm)(ce,{class:"btnIcon",flat:"",color:"primary",label:"导出",onClick:e.exportStock},null,8,["onClick"]),(0,a.Wm)(ce,{class:"btnIcon",flat:"",color:"primary",label:"导入",onClick:e.importStock},null,8,["onClick"]),(0,a.Wm)(ce,{class:"btnIcon",flat:"",color:"primary",label:"刷新",onClick:e.refresh},null,8,["onClick"]),(0,a.Wm)(ce,{class:"btnIcon",flat:"",color:"primary",label:"行业",onClick:t[0]||(t[0]=t=>e.dlgSector=!0)}),(0,a.Wm)(ce,{class:"btnIcon",flat:"",color:"primary",label:e.editStatus?"取消编辑":"编辑",onClick:t[1]||(t[1]=t=>e.editStatus=!e.editStatus)},null,8,["label"]),(0,a.Wm)(ce,{class:"btnIcon",flat:"",color:"primary",label:"分组",onClick:t[2]||(t[2]=t=>e.groupExpanded=!e.groupExpanded)})])),_:1}),(0,a.Wm)(he,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",null,[(0,a.Wm)(ue),(0,a.Wm)(_e,{flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(me,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.groupNames,(t=>((0,a.wg)(),(0,a.j4)(ce,{flat:"",color:e.groupName===t?"primary":"green",label:t,onClick:o=>e.select(t)},null,8,["color","label","onClick"])))),256))])),_:1}),(0,a.Wm)(me,null,{default:(0,a.w5)((()=>[(0,a.Wm)(we,{outlined:"",dense:"",clearable:"",modelValue:e.inputGroupName,"onUpdate:modelValue":t[3]||(t[3]=t=>e.inputGroupName=t),placeholder:"组名"},{append:(0,a.w5)((()=>[(0,a.Wm)(ce,{dense:"","no-caps":"",flat:"",color:"primary",icon:"add",unelevated:"",onClick:e.addShare},null,8,["onClick"]),(0,a.Wm)(ce,{dense:"","no-caps":"",flat:"",color:"primary",icon:"remove",unelevated:"",onClick:e.removeShare},null,8,["onClick"])])),after:(0,a.w5)((()=>[(0,a.Wm)(ce,{dense:"","no-caps":"",flat:"",color:"primary",label:"删除组",unelevated:"",onClick:e.removeGroup},null,8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1})],512),[[d.F8,e.groupExpanded]])])),_:1}),(0,a.Wm)(ye,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.groupShares,columns:e.userShareColumns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","hide-bottom":"","virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":t[4]||(t[4]=t=>e.pagination=t),"rows-per-page-options":[0]},{body:(0,a.w5)((t=>[(0,a.Wm)(ve,{props:t,class:(0,r.C_)(t.row.ts_code==e.share.ts_code?"bg-primary text-c-grey-1":""),onClick:o=>e.rowClick(t.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,{key:"name",props:t},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(t.row.ts_code),1),(0,a._)("div",null,(0,r.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"industry",props:t},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(t.row.industry),1),(0,a._)("div",null,(0,r.zw)(t.row.sector),1)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"trade_date",props:t},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(t.row.trade_date),1),(0,a._)("div",null,(0,r.zw)(t.row.qdate)+":"+(0,r.zw)(t.row.source),1)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"close",props:t},{default:(0,a.w5)((()=>[void 0!==t.row.close&&null!==t.row.close?((0,a.wg)(),(0,a.iD)("div",p,(0,r.zw)(t.row.close.toFixed(2)),1)):(0,a.kq)("",!0),void 0!==t.row.pct_chg_close&&null!==t.row.pct_chg_close?((0,a.wg)(),(0,a.iD)("div",u,[(0,a.Wm)(fe,{color:e.getNumberColor(t.row.pct_chg_close)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)((100*t.row.pct_chg_close).toFixed(2))+"%",1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"turnover",props:t},{default:(0,a.w5)((()=>[void 0!==t.row.pct_chg_vol&&null!==t.row.pct_chg_vol?((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(fe,{color:e.getNumberColor(t.row.pct_chg_vol)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)((100*t.row.pct_chg_vol).toFixed(2))+"%",1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.turnover&&null!==t.row.turnover?((0,a.wg)(),(0,a.iD)("div",w,(0,r.zw)(t.row.turnover.toFixed(2))+"%",1)):(0,a.kq)("",!0)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"pe",props:t},{default:(0,a.w5)((()=>[void 0!==t.row.pe&&null!==t.row.pe?((0,a.wg)(),(0,a.iD)("div",_,[(0,a.Wm)(fe,{color:t.row.pe<30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.pe.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.peg&&null!==t.row.peg?((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(fe,{color:t.row.peg<1?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.peg.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"percent_pe",props:t},{default:(0,a.w5)((()=>[void 0!==t.row.percent_pe&&null!==t.row.percent_pe?((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(fe,{color:t.row.percent_pe<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent_pe.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.percent_peg&&null!==t.row.percent_peg?((0,a.wg)(),(0,a.iD)("div",f,[(0,a.Wm)(fe,{color:t.row.percent_peg<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent_peg.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"industry_percent_pe",props:t},{default:(0,a.w5)((()=>[void 0!==t.row.industry_percent_pe&&null!==t.row.industry_percent_pe?((0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(fe,{color:t.row.industry_percent_pe<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.industry_percent_pe.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.industry_percent_peg&&null!==t.row.industry_percent_peg?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(fe,{color:t.row.industry_percent_peg<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.industry_percent_peg.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)])),_:2},1032,["props"]),(0,a.Wm)(ge,{key:"percent13_close",props:t},{default:(0,a.w5)((()=>[void 0!==t.row.percent13_close&&null!==t.row.percent13_close?((0,a.wg)(),(0,a.iD)("div",b,[(0,a.Wm)(fe,{color:t.row.percent13_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent13_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.percent34_close&&null!==t.row.percent34_close?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(fe,{color:t.row.percent34_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent34_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)])),_:2},1032,["props"]),e.editStatus?((0,a.wg)(),(0,a.j4)(ge,{key:0,"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(ce,{class:"btnIcon",color:"red",unelevated:"",round:"",dense:"",size:"sm",icon:"remove",onClick:o=>e.remove(t.row.ts_code)},null,8,["onClick"])])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1032,["props","class","onClick"])])),item:(0,a.w5)((t=>[(0,a._)("div",z,[(0,a.Wm)(_e,{style:{width:"340px","max-width":"100%"},class:(0,r.C_)(t.row.ts_code==e.share.ts_code?"bg-primary text-c-grey-1":"")},{default:(0,a.w5)((()=>[(0,a.Wm)(me,null,{default:(0,a.w5)((()=>[(0,a._)("div",q,[(0,a._)("div",W,(0,r.zw)(e.$t("ts_code"))+" : "+(0,r.zw)(t.row.ts_code),1),(0,a._)("div",x,(0,r.zw)(e.$t("name"))+" : "+(0,r.zw)(t.row.name),1)]),(0,a._)("div",U,[(0,a._)("div",C,(0,r.zw)(e.$t("industry"))+" : "+(0,r.zw)(t.row.industry),1),(0,a._)("div",S,(0,r.zw)(e.$t("sector"))+" : "+(0,r.zw)(t.row.sector),1)]),(0,a._)("div",F,[(0,a._)("div",Z,(0,r.zw)(e.$t("trade_date"))+" : "+(0,r.zw)(t.row.trade_date),1),(0,a._)("div",Q,(0,r.zw)(e.$t("qdate"))+" : "+(0,r.zw)(t.row.qdate),1)]),(0,a._)("div",V,[(0,a._)("div",$,(0,r.zw)(e.$t("source"))+" : "+(0,r.zw)(t.row.source),1),G]),(0,a._)("div",M,[void 0!==t.row.close&&null!==t.row.close?((0,a.wg)(),(0,a.iD)("div",P,(0,r.zw)(e.$t("close"))+" : "+(0,r.zw)(t.row.close.toFixed(2)),1)):(0,a.kq)("",!0),void 0!==t.row.pct_chg_close&&null!==t.row.pct_chg_close?((0,a.wg)(),(0,a.iD)("div",D,[(0,a.Uk)((0,r.zw)(e.$t("pct_chg_close"))+" :",1),(0,a.Wm)(fe,{color:e.getNumberColor(t.row.pct_chg_close)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)((100*t.row.pct_chg_close).toFixed(2))+"%",1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)]),(0,a._)("div",N,[void 0!==t.row.pct_chg_vol&&null!==t.row.pct_chg_vol?((0,a.wg)(),(0,a.iD)("div",T,[(0,a.Uk)((0,r.zw)(e.$t("pct_chg_vol"))+" :",1),(0,a.Wm)(fe,{color:e.getNumberColor(t.row.pct_chg_vol)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)((100*t.row.pct_chg_vol).toFixed(2))+"%",1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.turnover&&null!==t.row.turnover?((0,a.wg)(),(0,a.iD)("div",I,(0,r.zw)(e.$t("turnover"))+" : "+(0,r.zw)(t.row.turnover.toFixed(2))+"%",1)):(0,a.kq)("",!0)]),(0,a._)("div",R,[void 0!==t.row.pe&&null!==t.row.pe?((0,a.wg)(),(0,a.iD)("div",E,[(0,a.Uk)((0,r.zw)(e.$t("pe"))+" :",1),(0,a.Wm)(fe,{color:t.row.pe<30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.pe.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.peg&&null!==t.row.peg?((0,a.wg)(),(0,a.iD)("div",L,[(0,a.Uk)((0,r.zw)(e.$t("peg"))+" :",1),(0,a.Wm)(fe,{color:t.row.peg<1?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.peg.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)]),(0,a._)("div",H,[void 0!==t.row.percent13_close&&null!==t.row.percent13_close?((0,a.wg)(),(0,a.iD)("div",A,[(0,a.Uk)((0,r.zw)(e.$t("percent13_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent13_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent13_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.percent21_close&&null!==t.row.percent21_close?((0,a.wg)(),(0,a.iD)("div",B,[(0,a.Uk)((0,r.zw)(e.$t("percent21_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent21_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent21_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)]),(0,a._)("div",j,[void 0!==t.row.percent34_close&&null!==t.row.percent34_close?((0,a.wg)(),(0,a.iD)("div",O,[(0,a.Uk)((0,r.zw)(e.$t("percent34_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent34_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent34_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.percent55_close&&null!==t.row.percent55_close?((0,a.wg)(),(0,a.iD)("div",Y,[(0,a.Uk)((0,r.zw)(e.$t("percent55_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent55_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent55_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)]),(0,a._)("div",K,[void 0!==t.row.percent90_close&&null!==t.row.percent90_close?((0,a.wg)(),(0,a.iD)("div",X,[(0,a.Uk)((0,r.zw)(e.$t("percent90_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent90_close<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent90_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.percent120_close&&null!==t.row.percent120_close?((0,a.wg)(),(0,a.iD)("div",J,[(0,a.Uk)((0,r.zw)(e.$t("percent120_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent120_close<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent120_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)]),(0,a._)("div",ee,[void 0!==t.row.percent144_close&&null!==t.row.percent144_close?((0,a.wg)(),(0,a.iD)("div",te,[(0,a.Uk)((0,r.zw)(e.$t("percent144_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent144_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent144_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.percent233_close&&null!==t.row.percent233_close?((0,a.wg)(),(0,a.iD)("div",oe,[(0,a.Uk)((0,r.zw)(e.$t("percent233_close"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent233_close<0?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent233_close.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)]),(0,a._)("div",ae,[void 0!==t.row.percent_pe&&null!==t.row.percent_pe?((0,a.wg)(),(0,a.iD)("div",re,[(0,a.Uk)((0,r.zw)(e.$t("percent_pe"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent_pe<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent_pe.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.percent_peg&&null!==t.row.percent_peg?((0,a.wg)(),(0,a.iD)("div",se,[(0,a.Uk)((0,r.zw)(e.$t("percent_peg"))+" :",1),(0,a.Wm)(fe,{color:t.row.percent_peg<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.percent_peg.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)]),(0,a._)("div",le,[void 0!==t.row.industry_percent_pe&&null!==t.row.industry_percent_pe?((0,a.wg)(),(0,a.iD)("div",ie,[(0,a.Uk)((0,r.zw)(e.$t("industry_percent_pe"))+" :",1),(0,a.Wm)(fe,{color:t.row.industry_percent_pe<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.industry_percent_pe.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0),void 0!==t.row.industry_percent_peg&&null!==t.row.industry_percent_peg?((0,a.wg)(),(0,a.iD)("div",ne,[(0,a.Uk)((0,r.zw)(e.$t("industry_percent_peg"))+" :",1),(0,a.Wm)(fe,{color:t.row.industry_percent_peg<.5?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.industry_percent_peg.toFixed(2)),1)])),_:2},1032,["color"])])):(0,a.kq)("",!0)])])),_:2},1024)])),_:2},1032,["class"])])])),_:1},8,["rows","columns","grid","pagination"]),(0,a.Wm)(ze,{modelValue:e.dlgSector,"onUpdate:modelValue":t[6]||(t[6]=t=>e.dlgSector=t),"full-height":"","full-width":"",position:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(_e,null,{default:(0,a.w5)((()=>[(0,a.Wm)(me,null,{default:(0,a.w5)((()=>[(0,a._)("div",de,[(0,a.Wm)(be,{modelValue:e.share.sector,"onUpdate:modelValue":t[5]||(t[5]=t=>e.share.sector=t),options:e.sectorOptions,color:"primary",inline:""},null,8,["modelValue","options"])])])),_:1}),(0,a.Wm)(ke,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(ce,{class:"btnIcon",flat:"",label:"关闭",color:"primary"},null,512),[[qe]]),(0,a.Wm)(ce,{class:"btnIcon",flat:"",label:"修改",color:"primary",onClick:e.updateSector},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var pe=o(60499),ue=o(28374),me=o(62942),we=o(78094),_e=o(51085),he=o(54963);class ge{static toRaw(e){return(0,pe.IU)(e)}}var fe=o(26633);class ve extends fe.fX{groupName;subscription}new ve;class ye extends fe.bQ{shareGroups={};defaultGroupName="我的自选";getShareGroup(e){return this.shareGroups[e]}async delShareGroup(e){let t=this.shareGroups[e];if(t){let o=t.subscription;o&&await this.addSubscription(this.defaultGroupName,o),delete this.shareGroups[e];let a={groupName:e},r=await be.find(a,[{}],null,0,0);if(r&&r.length>0&&r[0])for(let e of r)await this.delete(e)}}getShareGroups(e){let t=[];for(let o of Object.keys(this.shareGroups)){let a=this.shareGroups[o];if(a){let o=a.subscription;if(o){let r=e.split(",");for(let e of r){let r=o.indexOf(e);r>-1&&t.push(a)}}}}return t}getGroupShares(e,t){let o=[];if(e&&e.length>0)for(let a of e){let e=a["ts_code"],r=this.getShareGroups(e);if(r&&r.length>0)for(let s of r)if(s.groupName===t){o.push(a);break}}return o}async init(){let e=!1,t={},o=await be.find(t,null,null,0,0);if(o&&o.length>0&&o[0])for(let a of o){let t=a.groupName;t&&""!=t&&(a.groupName===this.defaultGroupName&&(e=!0),this.shareGroups[t]=a)}if(!1===e){let e=new ve;e.groupName=this.defaultGroupName,e.subscription="",e=await this.upsert(e),this.shareGroups[this.defaultGroupName]=e}return this.shareGroups}async initSubscription(e){let t=e.split(",");if(t&&t.length>0)for(let o of t){let e=this.getShareGroups(o);e&&e.length>0||await this.addSubscription(this.defaultGroupName,o)}}async addSubscription(e,t){let o=this.shareGroups[e];if(o){let a=o.subscription;if(a){let e=t.split(",");for(let t of e){let e=a.indexOf(t);-1===e&&(""===a?a+=t:a=a+","+t,o.subscription=a)}}else a=t,o.subscription=a;o=await this.upsert(o),this.shareGroups[e]=o}else o=new ve,o.groupName=e,o.subscription=t,o=await this.upsert(o),this.shareGroups[e]=o;return o}async removeSubscription(e,t){let o=this.shareGroups[e];if(o){let e=o.subscription;if(e){let a=t.split(",");for(let t of a){let a=e.indexOf(t);-1!==a&&(e=e.replace(","+t,""),e=e.replace(t,""),o.subscription=e)}o=await this.upsert(o)}}return o}canbeAdd(e,t){let o=this.shareGroups[e];if(o){let e=o.subscription;if(e){let o=e.indexOf(t);if(o>-1)return!1}}return!0}canbenRemove(e,t){return!this.canbeAdd(e,t)}}let be=new ye("stk_sharegroup",["groupName"],[]);var ke=o(17779);const ze=(0,a.aZ)({name:"SelfSelection",data(){return{isGrid:this.isMobile(),editStatus:!1,dlgSector:!1,groupName:be.defaultGroupName,groupNames:[],groupShares:[],inputGroupName:"",groupExpanded:!1,sectorOptions:[{label:"光伏",value:"PV"},{label:"锂电",value:"Lithium"},{label:"美容",value:"Beauty"},{label:"猪饲养",value:"Pig"},{label:"医疗外包服务",value:"CXO"},{label:"医药连锁",value:"PC"},{label:"智能制造",value:"IM"}],pagination:(0,pe.iH)({rowsPerPage:1e3}),userShareColumns:[{name:"name",label:"代码/名",align:"left",field:"name",sortable:!0},{name:"industry",label:"细分行业",align:"left",field:"industry",sortable:!0},{name:"trade_date",label:"日期/来源",align:"right",field:"trade_date",sortable:!0},{name:"close",label:"价/涨幅",align:"right",field:"close"},{name:"turnover",label:"量变化/换手率",align:"right",field:"turnover"},{name:"pe",label:"pe/peg",align:"right",field:"pe"},{name:"percent_pe",label:"pe/peg位置",align:"right",field:"percent_pe"},{name:"industry_percent_pe",label:"industry pe/peg位置",align:"right",field:"industry_percent_pe"},{name:"percent13_close",label:"13close/34close位置",align:"right",field:"percent13_close"}]}},methods:{async select(e){this.groupName=e,this.groupShares=this.getGroupShares()},async removeGroup(){if(this.inputGroupName&&""!=this.inputGroupName){await be.delShareGroup(this.inputGroupName);let e=0;this.groupShares=this.getGroupShares();for(let t of this.groupNames){if(t===this.inputGroupName)return void(this.groupNames=this.groupNames.slice(e,1));++e}}},async removeShare(){let e=this.groupName;this.inputGroupName&&""!=this.inputGroupName&&(e=this.inputGroupName,this.inputGroupName=""),await be.removeSubscription(e,this.share.ts_code);this.groupShares=this.getGroupShares();for(let t of this.groupNames){if(t===e)return;0}},async addShare(){let e=this.groupName;this.inputGroupName&&""!=this.inputGroupName&&(e=this.inputGroupName,this.inputGroupName=""),await be.addSubscription(e,this.share.ts_code),this.groupShares=this.getGroupShares();for(let t of this.groupNames)if(t===e)return;this.groupNames.push(e)},async refresh(){he.v.loadingShow();let e=await ue.u.send("/share/GetMine",{ts_code:me.E.subscription});if(!e.data)return this.shares=[],this.currentIndex=-1,ke.error("GetMine fail"),void he.v.loadingHide();this.shares=e.data,this.shares&&this.shares.length>0&&(this.share=this.shares[0],this.currentIndex=0),this.groupShares=this.getGroupShares(),he.v.loadingHide()},getGroupShares(){return be.getGroupShares(this.shares,this.groupName)},async updateSector(){let e=await ue.u.send("/share/UpdateSector",{ts_code:this.share.ts_code,sector:this.share.sector});if(200!==e.status)return ke.error("UpdateSector fail"),void(this.dlgSector=!1);this.dlgSector=!1},async rowClick(e){this.share=e},async remove(e){me.E.removeSubscription(e),this.refresh()},getNumberColor(e){return _e.vl.getStockColor(e,0,0)},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid},exportStock(){he.v.confirm(this.subscription)},importStock(){he.v.prompt("input subscription").onOk((async e=>{let t=e;t&&(this.subscription=t,we.QT.upsert(ge.toRaw(this.account)),await be.initSubscription(t),this.refresh())})).onCancel((()=>{})).onDismiss((()=>{}))}},computed:{pagesNumber(){return Math.ceil(this.shares.length/this.pagination.rowsPerPage)},isMobile(){return he.v.isMobile()}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.shares,set:t=>{e.commit("stock/updateUserShares",t)}}),s=(0,a.Fl)({get:()=>e.state.stock.user.currentIndex,set:t=>{e.commit("stock/updateUserCurrentIndex",t)}}),l=(0,a.Fl)({get:()=>e.state.stock.user.selectedShares,set:t=>{e.commit("stock/updateUserSelectedShares",t)}}),i=(0,a.Fl)({get:()=>e.state.stock.user.account,set:t=>{e.commit("stock/updateUserAccount",t)}}),d=(0,a.Fl)({get:()=>e.state.stock.user.account.subscription,set:t=>{e.commit("stock/updateUserSubscription",t)}});return{tab:t,share:o,shares:r,currentIndex:s,selectedShares:l,subscription:d,account:i}},async mounted(){await this.refresh();let e=be.shareGroups;for(let t in e)this.groupNames.push(t)},async beforeCreate(){await be.init();await be.initSubscription(this.subscription)}});var qe=o(7683),We=o(51663),xe=o(90136),Ue=o(68879),Ce=o(69003),Se=o(50926),Fe=o(44458),Ze=o(63190),Qe=o(66611),Ve=o(77580),$e=o(31233),Ge=o(67220),Me=o(20990),Pe=o(32074),De=o(5429),Ne=o(11821),Te=o(62146),Ie=o(69984),Re=o.n(Ie);const Ee=(0,qe.Z)(ze,[["render",ce]]),Le=Ee;Re()(ze,"components",{QToolbar:We.Z,QSpace:xe.Z,QBtn:Ue.Z,QSlideTransition:Ce.Z,QSeparator:Se.Z,QCard:Fe.Z,QCardSection:Ze.Z,QInput:Qe.Z,QTable:Ve.Z,QTr:$e.Z,QTd:Ge.Z,QBadge:Me.Z,QDialog:Pe.Z,QOptionGroup:De.Z,QCardActions:Ne.Z}),Re()(ze,"directives",{ClosePopup:Te.Z});const He={class:"row no-wrap"},Ae={class:"q-pa-none"},Be={class:"row justify-center q-mt-none"},je=(0,a._)("p",null,null,-1);function Oe(e,t,o,s,l,i){const n=(0,a.up)("q-space"),d=(0,a.up)("q-toolbar-title"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-toolbar"),m=(0,a.up)("q-pagination"),w=(0,a.up)("q-td"),_=(0,a.up)("q-tr"),h=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(u,{class:"bg-c-grey-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(n),(0,a.Wm)(d,{class:"text-c-grey-10",align:"center"}),(0,a._)("div",He,[(0,a.Wm)(p,{outlined:"",debounce:"300",dense:"",clearable:"",modelValue:e.keyword,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.keyword=t),e.search],placeholder:"搜索"},{append:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",icon:"search",unelevated:"",onClick:e.search},null,8,["onClick"])])),_:1},8,["modelValue","onUpdate:modelValue"])])])),_:1}),(0,a._)("div",Ae,[(0,a._)("div",Be,[(0,a.Wm)(m,{modelValue:e.pagination.page,"onUpdate:modelValue":t[1]||(t[1]=t=>e.pagination.page=t),color:"primary",max:e.pagesNumber},null,8,["modelValue","max"])]),je,(0,a.Wm)(h,{flat:"",dense:"",rows:e.retShares,columns:e.shareColumns,"row-key":"id",separator:"none","hide-bottom":"","virtual-scroll":"",pagination:e.pagination,"onUpdate:pagination":t[2]||(t[2]=t=>e.pagination=t),"rows-per-page-options":[0]},{body:(0,a.w5)((t=>[(0,a.Wm)(_,{props:t,class:(0,r.C_)(e.getClass(t.row.ts_code)),onClick:o=>e.rowClick(t.row)},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{key:"name",props:t},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(t.row.name),1),(0,a._)("div",null,(0,r.zw)(t.row.ts_code),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"industry",props:t},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(t.row.industry),1),(0,a._)("div",null,(0,r.zw)(t.row.sector),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"area",props:t},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(t.row.area),1),(0,a._)("div",null,(0,r.zw)(t.row.market),1)])),_:2},1032,["props"]),e.canbeAdd(t.row.ts_code)?((0,a.wg)(),(0,a.j4)(w,{key:0,"auto-width":""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"btnIcon",color:"primary",unelevated:"",round:"",dense:"",size:"sm",icon:"add",onClick:o=>e.add(t.row.ts_code)},null,8,["onClick"])])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1032,["props","class","onClick"])])),_:1},8,["rows","columns","pagination"])])],64)}var Ye=o(17779);const Ke=(0,a.aZ)({name:"ShareSearch",data(){return{keyword:"",pagination:(0,pe.iH)({page:1,rowsPerPage:20}),retShares:[],shareColumns:[{name:"name",label:"代码/名称",align:"left",field:"name",sortable:!0},{name:"industry",label:"细分行业",align:"left",field:"industry",sortable:!0},{name:"area",label:"地区/交易所",align:"left",field:"area",sortable:!0}]}},methods:{async search(){if(""!==this.keyword){let e=await ue.u.send("/share/Search",{keyword:this.keyword});e.data||Ye.error("Search fail"),this.retShares=e.data}else this.retShares=[]},async rowClick(e){this.share=e},async refresh(){let e=await ue.u.send("/share/GetMine",{ts_code:me.E.subscription});if(!e.data)return this.shares=[],this.currentIndex=-1,void Ye.error("GetMine fail");this.shares=e.data,this.shares&&this.shares.length>0&&(this.share=this.shares[0],this.currentIndex=0)},async add(e){me.E.addSubscription(e),await be.initSubscription(me.E.subscription),this.refresh()},canbeAdd(e){return me.E.canbeAdd(e)},getClass(e){return e===this.share.ts_code?"bg-primary text-c-grey-1":!1===me.E.canbeAdd(e)?"bg-secondary text-c-grey-1":""}},computed:{pagesNumber(){return Math.ceil(this.retShares.length/this.pagination.rowsPerPage)},isMobile(){return he.v.isMobile()}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.shares,set:t=>{e.commit("stock/updateUserShares",t)}}),s=(0,a.Fl)({get:()=>e.state.stock.user.currentIndex,set:t=>{e.commit("stock/updateUserCurrentIndex",t)}});return{tab:t,share:o,shares:r,currentIndex:s}},mounted(){}});var Xe=o(81973),Je=o(80996);const et=(0,qe.Z)(Ke,[["render",Oe]]),tt=et;Re()(Ke,"components",{QToolbar:We.Z,QSpace:xe.Z,QToolbarTitle:Xe.Z,QInput:Qe.Z,QBtn:Ue.Z,QPagination:Je.Z,QTable:Ve.Z,QTr:$e.Z,QTd:Ge.Z});const ot={class:"q-pa-md"};function at(e,t,o,r,s,l){const i=(0,a.up)("q-space"),n=(0,a.up)("q-btn"),d=(0,a.up)("q-toolbar"),c=(0,a.up)("q-tab"),p=(0,a.up)("q-tabs"),u=(0,a.up)("LatestEventCond"),m=(0,a.up)("q-tab-panel"),w=(0,a.up)("LatestForecast"),_=(0,a.up)("LatestExpress"),h=(0,a.up)("LatestPerformance"),g=(0,a.up)("q-tab-panels");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",ot,[(0,a.Wm)(d,{class:"bg-c-grey-0"},{default:(0,a.w5)((()=>[(0,a.Wm)(i),(0,a.Wm)(n,{class:"btnIcon",flat:"",color:"primary",label:"刷新",onClick:e.refresh},null,8,["onClick"]),(0,a.Wm)(n,{class:"btnIcon",flat:"",color:"primary",label:"已读",onClick:e.read},null,8,["onClick"])])),_:1})]),(0,a.Wm)(p,{class:"bg-c-grey-1",modelValue:e.kind,"onUpdate:modelValue":t[0]||(t[0]=t=>e.kind=t),align:"left",dense:"","mobile-arrows":"","outside-arrows":"","indicator-color":"transparent","active-color":"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{name:"inout",label:"买卖点"}),(0,a.Wm)(c,{name:"forecast",label:"预测"}),(0,a.Wm)(c,{name:"express",label:"快报"}),(0,a.Wm)(c,{name:"performance",label:"业绩报告"})])),_:1},8,["modelValue"]),(0,a.Wm)(g,{class:"bg-c-grey-1",modelValue:e.kind,"onUpdate:modelValue":t[1]||(t[1]=t=>e.kind=t),"keep-alive":"",animated:"","transition-prev":"slide-right","transition-next":"slide-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"q-pa-none",name:"inout"},{default:(0,a.w5)((()=>[(0,a.Wm)(u)])),_:1}),(0,a.Wm)(m,{class:"q-pa-none",name:"forecast"},{default:(0,a.w5)((()=>[(0,a.Wm)(w)])),_:1}),(0,a.Wm)(m,{class:"q-pa-none",name:"express"},{default:(0,a.w5)((()=>[(0,a.Wm)(_)])),_:1}),(0,a.Wm)(m,{class:"q-pa-none",name:"performance"},{default:(0,a.w5)((()=>[(0,a.Wm)(h)])),_:1})])),_:1},8,["modelValue"])],64)}const rt={class:"row justify-center q-mt-md"},st={class:"q-pa-md"},lt={class:"row q-pa-md q-gutter-sm justify-start"},it={class:"q-pa-xs row items-start q-gutter-md"},nt={class:"row"},dt={class:"col"},ct={class:"col"},pt={class:"row"},ut={class:"col"},mt={class:"col"},wt={class:"row"},_t={class:"col"},ht={class:"col"},gt={class:"row"},ft={class:"col"},vt={class:"col"},yt={class:"row"},bt={class:"col"},kt={class:"col"},zt={class:"row"},qt={class:"col"},Wt={class:"col"},xt={class:"row"},Ut={class:"col"},Ct={class:"col"},St={class:"row"},Ft={class:"col"},Zt={class:"col"};function Qt(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),d=(0,a.up)("q-space"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-td"),m=(0,a.up)("q-badge"),w=(0,a.up)("q-tr"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),g=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",rt,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",st,[(0,a.Wm)(g,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.performances,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"",onRequest:e.onRequest,"rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[3]||(t[3]=t=>e.pagination=t)},{top:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a._)("div",lt,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"]),(0,a.Wm)(p,{outlined:"",debounce:"300",dense:"",clearable:"",modelValue:e.qdate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.qdate=t),placeholder:"季度"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])),body:(0,a.w5)((e=>[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{key:"securitycode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.security_code),1),(0,a._)("div",null,(0,r.zw)(e.row.security_name_abbr),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"qdate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.qdate),1),(0,a._)("div",null,(0,r.zw)(e.row.notice_date),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"totaloperateincome",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.total_operate_income),1),(0,a._)("div",null,(0,r.zw)(e.row.parent_net_profit),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"yoysales",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_sales>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_dedu_np>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_dedu_np.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"basiceps",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.basic_eps.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.cfps.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"weightavgroe",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.weight_avg_roe>=15?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.weight_avg_roe.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.gross_profit_margin>=20?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.gross_profit_margin.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"orlastmonth",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.or_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.np_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"bps",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.bps.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.dividend_yield_ratio.toFixed(2)),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",it,[(0,a.Wm)(h,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",nt,[(0,a._)("div",dt,[(0,a.Uk)((0,r.zw)(e.$t("security_code"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_code),1)])),_:2},1032,["color"])]),(0,a._)("div",ct,[(0,a.Uk)((0,r.zw)(e.$t("security_name_abbr"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_name_abbr),1)])),_:2},1032,["color"])])]),(0,a._)("div",pt,[(0,a._)("div",ut,(0,r.zw)(e.$t("qdate"))+" : "+(0,r.zw)(t.row.qdate),1),(0,a._)("div",mt,(0,r.zw)(e.$t("notice_date"))+" : "+(0,r.zw)(t.row.notice_date),1)]),(0,a._)("div",wt,[(0,a._)("div",_t,(0,r.zw)(e.$t("total_operate_income"))+" : "+(0,r.zw)(t.row.total_operate_income),1),(0,a._)("div",ht,(0,r.zw)(e.$t("parent_net_profit"))+" : "+(0,r.zw)(t.row.parent_net_profit),1)]),(0,a._)("div",gt,[(0,a._)("div",ft,[(0,a.Uk)((0,r.zw)(e.$t("yoy_sales"))+" :",1),(0,a.Wm)(m,{color:t.row.yoy_sales>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",vt,[(0,a.Uk)((0,r.zw)(e.$t("yoy_dedu_np"))+" :",1),(0,a.Wm)(m,{color:t.row.yoy_dedu_np>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_dedu_np.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",yt,[(0,a._)("div",bt,(0,r.zw)(e.$t("basic_eps"))+" : "+(0,r.zw)(t.row.basic_eps.toFixed(2)),1),(0,a._)("div",kt,(0,r.zw)(e.$t("cfps"))+" : "+(0,r.zw)(t.row.cfps.toFixed(2)),1)]),(0,a._)("div",zt,[(0,a._)("div",qt,[(0,a.Uk)((0,r.zw)(e.$t("weight_avg_roe"))+" :",1),(0,a.Wm)(m,{color:t.row.weight_avg_roe>=15?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.weight_avg_roe.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",Wt,[(0,a.Uk)((0,r.zw)(e.$t("gross_profit_margin"))+" :",1),(0,a.Wm)(m,{color:t.row.gross_profit_margin>=20?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.gross_profit_margin.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",xt,[(0,a._)("div",Ut,[(0,a.Uk)((0,r.zw)(e.$t("or_last_month"))+" :",1),(0,a.Wm)(m,{color:t.row.or_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",Ct,[(0,a.Uk)((0,r.zw)(e.$t("np_last_month"))+" :",1),(0,a.Wm)(m,{color:t.row.np_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",St,[(0,a._)("div",Ft,(0,r.zw)(e.$t("bps"))+" : "+(0,r.zw)(t.row.bps.toFixed(2)),1),(0,a._)("div",Zt,(0,r.zw)(e.$t("dividend_yield_ratio"))+" : "+(0,r.zw)(t.row.dividend_yield_ratio.toFixed(2)),1)])])),_:2},1024)])),_:2},1024)])])),_:1},8,["rows","columns","grid","onRequest","pagination"])])],64)}const Vt=(0,a.aZ)({name:"LatestPerformance",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",qdate:"",pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),performances:[],columns:[{name:"securitycode",label:"代码/名称",align:"left",field:"security_code",sortable:!0},{name:"qdate",label:"季度/时间",align:"right",field:"qdate",sortable:!0},{name:"totaloperateincome",label:"营收/利润",align:"right",field:"total_operate_income",sortable:!0},{name:"yoysales",label:"营收涨幅/利润涨幅",align:"right",field:"yoy_sales",sortable:!0},{name:"basiceps",label:"每股利润",align:"right",field:"basic_eps",sortable:!0},{name:"weightavgroe",label:"净资产收益率",align:"right",field:"weight_avg_roe",sortable:!0},{name:"orlastmonth",label:"环比增长",align:"right",field:"or_last_month",sortable:!0},{name:"bps",label:"每股现金流",align:"right",field:"bps",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0),r={security_code:this.tscode,start_date:this.qdate,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/performance/FindLatest",r);const l=s.data;l?(this.performances=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.performances=[]},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)},latestReadDate(){let e=this.currentUser.account.lastReadDate;e||(e=new Date);let t=_e.Em.format(e,"yyyy-MM-dd");return t}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user,set:t=>{e.commit("stock/updateUser",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserTscode",t)}});return{currentUser:t,tab:o,share:r}},mounted(){this.tscode=this.share.ts_code,this.qdate=this.latestReadDate,this.refresh()}}),$t=(0,qe.Z)(Vt,[["render",Qt]]),Gt=$t;Re()(Vt,"components",{QPagination:Je.Z,QTable:Ve.Z,QSpace:xe.Z,QBtn:Ue.Z,QInput:Qe.Z,QTr:$e.Z,QTd:Ge.Z,QBadge:Me.Z,QCard:Fe.Z,QCardSection:Ze.Z});const Mt={class:"row justify-center q-mt-md"},Pt={class:"q-pa-md"},Dt={class:"row q-pa-md q-gutter-sm justify-start"},Nt={class:"q-pa-xs row items-start q-gutter-md"},Tt={class:"row"},It={class:"col"},Rt={class:"col"},Et={class:"row"},Lt={class:"col"},Ht={class:"col"},At={class:"row"},Bt={class:"col"},jt={class:"col"},Ot={class:"row"},Yt={class:"col"},Kt={class:"col"},Xt={class:"row"},Jt={class:"col"},eo={class:"col"},to={class:"row"},oo={class:"col"},ao={class:"col"},ro={class:"row"},so={class:"col"},lo={class:"col"};function io(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),d=(0,a.up)("q-space"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-td"),m=(0,a.up)("q-badge"),w=(0,a.up)("q-tr"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),g=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Mt,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",Pt,[(0,a.Wm)(g,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.expresses,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"","rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[3]||(t[3]=t=>e.pagination=t),onRequest:e.onRequest,onRowClick:e.rowClick},{top:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a._)("div",Dt,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"]),(0,a.Wm)(p,{outlined:"",debounce:"300",dense:"",clearable:"",modelValue:e.qdate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.qdate=t),placeholder:"季度"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])),body:(0,a.w5)((e=>[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{key:"securitycode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.security_code),1),(0,a._)("div",null,(0,r.zw)(e.row.security_name_abbr),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"qdate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.qdate),1),(0,a._)("div",null,(0,r.zw)(e.row.notice_date),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"totaloperateincome",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.total_operate_income),1),(0,a._)("div",null,(0,r.zw)(e.row.total_operate_income_sq),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"parentnetprofit",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.parent_net_profit),1),(0,a._)("div",null,(0,r.zw)(e.row.parent_net_profit_sq),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"yoysales",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_sales>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_net_profit>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_net_profit.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"basiceps",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.basic_eps.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.parent_bvps.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"orlastmonth",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.or_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.np_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",Nt,[(0,a.Wm)(h,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",Tt,[(0,a._)("div",It,[(0,a.Uk)((0,r.zw)(e.$t("security_code"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_code),1)])),_:2},1032,["color"])]),(0,a._)("div",Rt,[(0,a.Uk)((0,r.zw)(e.$t("security_name_abbr"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_name_abbr),1)])),_:2},1032,["color"])])]),(0,a._)("div",Et,[(0,a._)("div",Lt,(0,r.zw)(e.$t("qdate"))+" : "+(0,r.zw)(t.row.qdate),1),(0,a._)("div",Ht,(0,r.zw)(e.$t("notice_date"))+" : "+(0,r.zw)(t.row.notice_date),1)]),(0,a._)("div",At,[(0,a._)("div",Bt,(0,r.zw)(e.$t("total_operate_income"))+":"+(0,r.zw)(t.row.total_operate_income),1),(0,a._)("div",jt,(0,r.zw)(e.$t("total_operate_income_sq"))+":"+(0,r.zw)(t.row.total_operate_income_sq),1)]),(0,a._)("div",Ot,[(0,a._)("div",Yt,(0,r.zw)(e.$t("parent_net_profit"))+":"+(0,r.zw)(t.row.parent_net_profit),1),(0,a._)("div",Kt,(0,r.zw)(e.$t("parent_net_profit_sq"))+":"+(0,r.zw)(t.row.parent_net_profit_sq),1)]),(0,a._)("div",Xt,[(0,a._)("div",Jt,[(0,a.Uk)((0,r.zw)(e.$t("yoy_sales"))+":",1),(0,a.Wm)(m,{color:t.row.yoy_sales>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",eo,[(0,a.Uk)((0,r.zw)(e.$t("yoy_net_profit"))+":",1),(0,a.Wm)(m,{color:t.row.yoy_net_profit>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_net_profit.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",to,[(0,a._)("div",oo,[(0,a.Uk)((0,r.zw)(e.$t("or_last_month"))+":",1),(0,a.Wm)(m,{color:t.row.or_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",ao,[(0,a.Uk)((0,r.zw)(e.$t("np_last_month"))+":",1),(0,a.Wm)(m,{color:t.row.np_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",ro,[(0,a._)("div",so,(0,r.zw)(e.$t("basic_eps"))+":"+(0,r.zw)(t.row.basic_eps.toFixed(2)),1),(0,a._)("div",lo,(0,r.zw)(e.$t("parent_bvps"))+":"+(0,r.zw)(t.row.parent_bvps.toFixed(2)),1)])])),_:2},1024)])),_:2},1024)])])),_:1},8,["rows","columns","grid","pagination","onRequest","onRowClick"])])],64)}const no=(0,a.aZ)({name:"LatestExpress",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",qdate:"",pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),expresses:[],columns:[{name:"securitycode",label:"代码/名称",align:"left",field:"security_code",sortable:!0},{name:"qdate",label:"季度/时间",align:"right",field:"qdate",sortable:!0},{name:"totaloperateincome",label:"营收",align:"right",field:"total_operate_income",sortable:!0},{name:"parentnetprofit",label:"利润",align:"right",field:"parent_net_profit",sortable:!0},{name:"yoysales",label:"营收涨幅/利润涨幅",align:"right",field:"yoy_sales",sortable:!0},{name:"basiceps",label:"每股利润",align:"right",field:"basic_eps",sortable:!0},{name:"orlastmonth",label:"环比增长",align:"right",field:"or_last_month",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0),r={security_code:this.tscode,start_date:this.qdate,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/express/FindLatest",r);const l=s.data;l?(this.expresses=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.expresses=[]},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)},latestReadDate(){let e=this.currentUser.account.lastReadDate;e||(e=new Date);let t=_e.Em.format(e,"yyyy-MM-dd");return t}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user,set:t=>{e.commit("stock/updateUser",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}});return{tab:o,share:r,currentUser:t}},mounted(){this.tscode=this.share.ts_code,this.qdate=this.latestReadDate,this.refresh()}}),co=(0,qe.Z)(no,[["render",io]]),po=co;Re()(no,"components",{QPagination:Je.Z,QTable:Ve.Z,QSpace:xe.Z,QBtn:Ue.Z,QInput:Qe.Z,QTr:$e.Z,QTd:Ge.Z,QBadge:Me.Z,QCard:Fe.Z,QCardSection:Ze.Z});const uo={class:"row justify-center q-mt-md"},mo={class:"q-pa-md"},wo={class:"row q-pa-md q-gutter-sm justify-start"},_o={class:"q-pa-xs row items-start q-gutter-md"},ho={class:"row"},go={class:"col"},fo={class:"col"},vo={class:"row"},yo={class:"col"},bo={class:"col"},ko={class:"row"},zo={class:"col"},qo={class:"row"},Wo={class:"col"},xo={class:"row"},Uo={class:"col"},Co={class:"col"},So={class:"row"},Fo={class:"col"},Zo={class:"col"},Qo={class:"row"},Vo={class:"col"},$o={class:"col"};function Go(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),d=(0,a.up)("q-space"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-td"),m=(0,a.up)("q-badge"),w=(0,a.up)("q-tr"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),g=(0,a.up)("q-expansion-item"),f=(0,a.up)("q-list"),v=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",uo,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",mo,[(0,a.Wm)(v,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.forecasts,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"","rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[3]||(t[3]=t=>e.pagination=t),onRequest:e.onRequest,onRowClick:e.rowClick},{top:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a._)("div",wo,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"]),(0,a.Wm)(p,{outlined:"",debounce:"300",dense:"",clearable:"",modelValue:e.qdate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.qdate=t),placeholder:"季度"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])),body:(0,a.w5)((e=>[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{key:"securitycode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.security_code),1),(0,a._)("div",null,(0,r.zw)(e.row.security_name_abbr),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"qdate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.qdate),1),(0,a._)("div",null,(0,r.zw)(e.row.notice_date),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"forecaststate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:"increase"===e.row.forecast_state?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.forecast_state),1)])),_:2},1032,["color"])]),(0,a._)("div",null,(0,r.zw)(e.row.predict_finance),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"increaseavg",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.increase_avg>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.increase_avg.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,(0,r.zw)(e.row.forecast_avg.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"predictamtlower",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.predict_amt_lower.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.predict_amt_upper.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"addamplower",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.add_amp_lower>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.add_amp_lower.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.add_amp_upper>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.add_amp_upper.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",_o,[(0,a.Wm)(f,{class:"rounded-borders",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",ho,[(0,a._)("div",go,[(0,a.Uk)((0,r.zw)(e.$t("security_code"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_code),1)])),_:2},1032,["color"])]),(0,a._)("div",fo,[(0,a.Uk)((0,r.zw)(e.$t("security_name_abbr"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_name_abbr),1)])),_:2},1032,["color"])])]),(0,a._)("div",vo,[(0,a._)("div",yo,(0,r.zw)(e.$t("qdate"))+" : "+(0,r.zw)(t.row.qdate),1),(0,a._)("div",bo,(0,r.zw)(e.$t("notice_date"))+" : "+(0,r.zw)(t.row.notice_date),1)]),(0,a._)("div",ko,[(0,a._)("div",zo,[(0,a.Uk)((0,r.zw)(e.$t("forecast_state"))+":",1),(0,a.Wm)(m,{color:"increase"===t.row.forecast_state?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.forecast_state),1)])),_:2},1032,["color"])])]),(0,a._)("div",qo,[(0,a._)("div",Wo,(0,r.zw)(e.$t("predict_finance"))+":"+(0,r.zw)(t.row.predict_finance),1)]),(0,a._)("div",xo,[(0,a._)("div",Uo,[(0,a.Uk)((0,r.zw)(e.$t("increase_avg"))+":",1),(0,a.Wm)(m,{color:t.row.increase_avg>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.increase_avg)+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",Co,(0,r.zw)(e.$t("forecast_avg"))+":"+(0,r.zw)(t.row.forecast_avg),1)]),(0,a._)("div",So,[(0,a._)("div",Fo,(0,r.zw)(e.$t("predict_amt_lower"))+":"+(0,r.zw)(t.row.predict_amt_lower),1),(0,a._)("div",Zo,(0,r.zw)(e.$t("predict_amt_upper"))+":"+(0,r.zw)(t.row.predict_amt_upper),1)]),(0,a._)("div",Qo,[(0,a._)("div",Vo,[(0,a.Uk)((0,r.zw)(e.$t("add_amp_lower"))+":",1),(0,a.Wm)(m,{color:t.row.add_amp_lower>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.add_amp_lower)+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",$o,[(0,a.Uk)((0,r.zw)(e.$t("add_amp_upper"))+":",1),(0,a.Wm)(m,{color:t.row.add_amp_upper>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.add_amp_upper)+"%",1)])),_:2},1032,["color"])])])])),_:2},1024)])),_:2},1024),(0,a.Wm)(g,{"expand-separator":"",icon:"perm_identity",label:e.$t("more")},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{width:"360px","max-width":"100%"},class:(0,r.C_)(t.row.security_code==e.share.ts_code?"bg-primary text-c-grey-1":"")},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.$t("predict_content"))+":"+(0,r.zw)(t.row.predict_content),1),(0,a._)("div",null,(0,r.zw)(e.$t("change_reason_explain"))+":"+(0,r.zw)(t.row.change_reason_explain),1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["label"])])),_:2},1024)])])),_:1},8,["rows","columns","grid","pagination","onRequest","onRowClick"])])],64)}const Mo=(0,a.aZ)({name:"LatestForecast",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",qdate:"",pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),forecasts:[],columns:[{name:"securitycode",label:"代码/名称",align:"left",field:"security_code",sortable:!0},{name:"qdate",label:"季度/时间",align:"right",field:"qdate",sortable:!0},{name:"forecaststate",label:"预测状态/项目",align:"right",field:"forecast_state",sortable:!0},{name:"increaseavg",label:"增长均值",align:"right",field:"increase_avg",sortable:!0},{name:"predictamtlower",label:"增长低高限",align:"right",field:"predict_amt_lower",sortable:!0},{name:"addamplower",label:"增长率低高限",align:"right",field:"add_amp_lower",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0),r={security_code:this.tscode,start_date:this.qdate,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/forecast/FindLatest",r);const l=s.data;l?(this.forecasts=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.forecasts=[]},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)},latestReadDate(){let e=this.currentUser.account.lastReadDate;e||(e=new Date);let t=_e.Em.format(e,"yyyy-MM-dd");return t}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user,set:t=>{e.commit("stock/updateUser",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}});return{currentUser:t,tab:o,share:r}},mounted(){this.tscode=this.share.ts_code,this.qdate=this.latestReadDate,this.refresh()}});var Po=o(13246),Do=o(50651);const No=(0,qe.Z)(Mo,[["render",Go]]),To=No;Re()(Mo,"components",{QPagination:Je.Z,QTable:Ve.Z,QSpace:xe.Z,QBtn:Ue.Z,QInput:Qe.Z,QTr:$e.Z,QTd:Ge.Z,QBadge:Me.Z,QList:Po.Z,QCard:Fe.Z,QCardSection:Ze.Z,QExpansionItem:Do.Z});const Io={class:"row justify-center q-mt-md"},Ro={class:"q-pa-md"},Eo={class:"row q-pa-md q-gutter-sm justify-start"},Lo={class:"col-12"},Ho={class:"col-12"},Ao={class:"col-12"},Bo={class:"col-12"},jo={class:"q-pa-xs row items-start q-gutter-md"},Oo={class:"row"},Yo={class:"col"},Ko={class:"col"},Xo={class:"row"},Jo={class:"col"},ea={class:"row"},ta={class:"col"},oa={class:"col"},aa={class:"row"},ra={class:"col"},sa={class:"col"},la={class:"row"},ia={class:"col"};function na(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-option-group"),m=(0,a.up)("q-slide-transition"),w=(0,a.up)("q-td"),_=(0,a.up)("q-tr"),h=(0,a.up)("q-badge"),g=(0,a.up)("q-card-section"),f=(0,a.up)("q-card"),v=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Io,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",Ro,[(0,a.Wm)(v,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.eventConds,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"","rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[6]||(t[6]=t=>e.pagination=t),onRequest:e.onRequest,onRowClick:e.rowClick},{top:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a.Wm)(c,{dense:"",flat:"",color:"primary",icon:e.condExpanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:t[1]||(t[1]=t=>e.condExpanded=!e.condExpanded)},null,8,["icon"]),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",null,[(0,a._)("div",Eo,[(0,a._)("div",Lo,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"])]),(0,a._)("div",Ho,[(0,a.Wm)(u,{modelValue:e.eventCode,"onUpdate:modelValue":t[3]||(t[3]=t=>e.eventCode=t),options:e.eventCodeOptions,color:"primary",inline:"",dense:"",type:"radio"},null,8,["modelValue","options"])]),(0,a._)("div",Ao,[(0,a.Wm)(u,{modelValue:e.eventType,"onUpdate:modelValue":t[4]||(t[4]=t=>e.eventType=t),options:e.eventTypeOptions,color:"primary",inline:"",dense:"",type:"radio"},null,8,["modelValue","options"])]),(0,a._)("div",Bo,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tradeDate,"onUpdate:modelValue":t[5]||(t[5]=t=>e.tradeDate=t),modelModifiers:{number:!0},placeholder:"日期"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])],512),[[d.F8,e.condExpanded]])])),_:1})])])),body:(0,a.w5)((e=>[(0,a.Wm)(_,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{key:"tscode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.ts_code),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"name",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"tradedate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.trade_date),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventcode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.event_code),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventname",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.event_name),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventtype",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.event_type),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"score",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.score),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",jo,[(0,a.Wm)(f,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a._)("div",Oo,[(0,a._)("div",Yo,[(0,a.Uk)((0,r.zw)(e.$t("ts_code"))+" :",1),(0,a.Wm)(h,{color:t.row.ts_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.ts_code),1)])),_:2},1032,["color"])]),(0,a._)("div",Ko,(0,r.zw)(e.$t("name"))+":"+(0,r.zw)(t.row.name),1)]),(0,a._)("div",Xo,[(0,a._)("div",Jo,[(0,a.Uk)((0,r.zw)(e.$t("trade_date"))+" :",1),(0,a.Wm)(h,{color:t.row.ts_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.trade_date),1)])),_:2},1032,["color"])])]),(0,a._)("div",ea,[(0,a._)("div",ta,(0,r.zw)(e.$t("event_code"))+":"+(0,r.zw)(t.row.event_code),1),(0,a._)("div",oa,(0,r.zw)(e.$t("event_name"))+":"+(0,r.zw)(t.row.event_name),1)]),(0,a._)("div",aa,[(0,a._)("div",ra,[(0,a.Uk)((0,r.zw)(e.$t("event_type"))+":",1),(0,a.Wm)(h,{color:"in"===t.row.event_type?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.event_type),1)])),_:2},1032,["color"])]),(0,a._)("div",sa,(0,r.zw)(e.$t("score"))+":"+(0,r.zw)(t.row.score),1)]),(0,a._)("div",la,[(0,a._)("div",ia,(0,r.zw)(e.$t("descr"))+":"+(0,r.zw)(t.row.descr),1)])])),_:2},1024)])),_:2},1024)])])),_:1},8,["rows","columns","grid","pagination","onRequest","onRowClick"])])],64)}const da=(0,a.aZ)({name:"LatestEventCond",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",tradeDate:0,condExpanded:!1,pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),eventConds:[],eventCode:(0,pe.iH)(""),eventCodeOptions:[{label:"红杏出墙",value:"RedApricots",type:"in"},{label:"三箭齐发",value:"ThreeArrow",type:"in"},{label:"鸿雁南回",value:"SwanSouth",type:"in"},{label:"一剑穿心",value:"SwordHeart",type:"out"},{label:"惊鸿照影",value:"GreenShadow",type:"out"},{label:"有心无力",value:"HeartPower",type:"out"},{label:"虚张声势",value:"DeerTrap",type:"out"},{label:"石破天惊",value:"StoneSky",type:"out"}],eventType:(0,pe.iH)(""),eventTypeOptions:[{label:"买",value:"in"},{label:"卖",value:"out"}],columns:[{name:"tscode",label:"代码",align:"left",field:"ts_code",sortable:!0},{name:"name",label:"名称",align:"left",field:"name",sortable:!0},{name:"tradedate",label:"时间",align:"right",field:"trade_date",sortable:!0},{name:"eventcode",label:"事件代码",align:"right",field:"event_code",sortable:!0},{name:"eventname",label:"事件名称",align:"right",field:"event_name",sortable:!0},{name:"eventtype",label:"事件类型",align:"right",field:"event_type",sortable:!0},{name:"score",label:"评分",align:"right",field:"score",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0);if(o>0){let r={ts_code:this.tscode,start_date:this.tradeDate,event_code:this.eventCode,event_type:this.eventType,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/eventcond/FindGroupby",r);const l=s.data;l?(this.eventConds=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.eventConds=[]}},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)},latestTradeDate(){let e=this.currentUser.account.lastReadDate;e||(e=new Date);let t=Number(_e.Em.format(e,"yyyyMMdd"));return t}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user,set:t=>{e.commit("stock/updateUser",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}});return{tab:o,share:r,currentUser:t}},mounted(){this.tscode=this.currentUser.subscription,this.tradeDate=this.latestTradeDate,this.refresh()}}),ca=(0,qe.Z)(da,[["render",na]]),pa=ca;Re()(da,"components",{QPagination:Je.Z,QTable:Ve.Z,QBtn:Ue.Z,QSlideTransition:Ce.Z,QInput:Qe.Z,QOptionGroup:De.Z,QTr:$e.Z,QTd:Ge.Z,QCard:Fe.Z,QCardSection:Ze.Z,QBadge:Me.Z});const ua=(0,a.aZ)({name:"LatestEvent",components:{LatestPerformance:Gt,LatestExpress:po,LatestForecast:To,LatestEventCond:pa},data(){return{kind:"inout"}},methods:{async read(){let e=new Date;this.lastReadDate=e,we.QT.update(ge.toRaw(this.account))}},computed:{isMobile(){return he.v.isMobile()},latestReadDate(){let e=this.currentUser.account.lastReadDate;e||(e=new Date);let t=_e.Em.format(e,"yyyy-MM-dd");return t},latestTradeDate(){let e=this.currentUser.account.lastReadDate;e||(e=new Date);let t=Number(_e.Em.format(e,"yyyyMMdd"));return t}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user,set:t=>{e.commit("stock/updateUser",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}}),s=(0,a.Fl)({get:()=>e.state.stock.user.account.subscription,set:t=>{e.commit("stock/updateUserSubscription",t)}}),l=(0,a.Fl)({get:()=>e.state.stock.user.account.lastReadDate,set:t=>{e.commit("stock/updateUserAccountLastReadDate",t)}}),i=(0,a.Fl)({get:()=>e.state.stock.user.account,set:t=>{e.commit("stock/updateUserAccount",t)}});return{tab:o,share:r,currentUser:t,subscription:s,account:i,lastReadDate:l}}});var ma=o(47817),wa=o(57661),_a=o(89800),ha=o(84106);const ga=(0,qe.Z)(ua,[["render",at]]),fa=ga;function va(e,t,o,r,s,l){const i=(0,a.up)("q-tab"),n=(0,a.up)("q-tabs"),d=(0,a.up)("EventCond"),c=(0,a.up)("q-tab-panel"),p=(0,a.up)("Forecast"),u=(0,a.up)("Express"),m=(0,a.up)("Performance"),w=(0,a.up)("q-tab-panels");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n,{class:"bg-c-grey-1",modelValue:e.kind,"onUpdate:modelValue":t[0]||(t[0]=t=>e.kind=t),align:"left",dense:"","mobile-arrows":"","outside-arrows":"","indicator-color":"transparent","active-color":"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"inout",label:"买卖点"}),(0,a.Wm)(i,{name:"forecast",label:"预测"}),(0,a.Wm)(i,{name:"express",label:"快报"}),(0,a.Wm)(i,{name:"performance",label:"业绩报告"})])),_:1},8,["modelValue"]),(0,a.Wm)(w,{class:"bg-c-grey-1",modelValue:e.kind,"onUpdate:modelValue":t[1]||(t[1]=t=>e.kind=t),"keep-alive":"",animated:"","transition-prev":"slide-right","transition-next":"slide-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"q-pa-none",name:"inout"},{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:1}),(0,a.Wm)(c,{class:"q-pa-none",name:"forecast"},{default:(0,a.w5)((()=>[(0,a.Wm)(p)])),_:1}),(0,a.Wm)(c,{class:"q-pa-none",name:"express"},{default:(0,a.w5)((()=>[(0,a.Wm)(u)])),_:1}),(0,a.Wm)(c,{class:"q-pa-none",name:"performance"},{default:(0,a.w5)((()=>[(0,a.Wm)(m)])),_:1})])),_:1},8,["modelValue"])],64)}Re()(ua,"components",{QToolbar:We.Z,QSpace:xe.Z,QBtn:Ue.Z,QTabs:ma.Z,QTab:wa.Z,QTabPanels:_a.Z,QTabPanel:ha.Z});const ya={class:"row justify-center q-mt-md"},ba={class:"q-pa-md"},ka={class:"row q-pa-md q-gutter-sm justify-start"},za={class:"q-pa-xs row items-start q-gutter-md"},qa={class:"row"},Wa={class:"col"},xa={class:"col"},Ua={class:"row"},Ca={class:"col"},Sa={class:"col"},Fa={class:"row"},Za={class:"col"},Qa={class:"col"},Va={class:"row"},$a={class:"col"},Ga={class:"col"},Ma={class:"row"},Pa={class:"col"},Da={class:"col"},Na={class:"row"},Ta={class:"col"},Ia={class:"col"},Ra={class:"row"},Ea={class:"col"},La={class:"col"},Ha={class:"row"},Aa={class:"col"},Ba={class:"col"};function ja(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),d=(0,a.up)("q-space"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-td"),m=(0,a.up)("q-badge"),w=(0,a.up)("q-tr"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),g=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",ya,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",ba,[(0,a.Wm)(g,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.performances,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"",onRequest:e.onRequest,"rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[3]||(t[3]=t=>e.pagination=t)},{top:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a._)("div",ka,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"]),(0,a.Wm)(p,{outlined:"",debounce:"300",dense:"",clearable:"",modelValue:e.qdate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.qdate=t),placeholder:"季度"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])),body:(0,a.w5)((e=>[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{key:"securitycode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.security_code),1),(0,a._)("div",null,(0,r.zw)(e.row.security_name_abbr),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"qdate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.qdate),1),(0,a._)("div",null,(0,r.zw)(e.row.notice_date),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"totaloperateincome",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.total_operate_income),1),(0,a._)("div",null,(0,r.zw)(e.row.parent_net_profit),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"yoysales",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_sales>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_dedu_np>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_dedu_np.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"basiceps",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.basic_eps.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.cfps.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"weightavgroe",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.weight_avg_roe>=15?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.weight_avg_roe.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.gross_profit_margin>=20?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.gross_profit_margin.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"orlastmonth",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.or_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.np_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"bps",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.bps.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.dividend_yield_ratio.toFixed(2)),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",za,[(0,a.Wm)(h,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",qa,[(0,a._)("div",Wa,[(0,a.Uk)((0,r.zw)(e.$t("security_code"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_code),1)])),_:2},1032,["color"])]),(0,a._)("div",xa,[(0,a.Uk)((0,r.zw)(e.$t("security_name_abbr"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_name_abbr),1)])),_:2},1032,["color"])])]),(0,a._)("div",Ua,[(0,a._)("div",Ca,(0,r.zw)(e.$t("qdate"))+" : "+(0,r.zw)(t.row.qdate),1),(0,a._)("div",Sa,(0,r.zw)(e.$t("notice_date"))+" : "+(0,r.zw)(t.row.notice_date),1)]),(0,a._)("div",Fa,[(0,a._)("div",Za,(0,r.zw)(e.$t("total_operate_income"))+" : "+(0,r.zw)(t.row.total_operate_income),1),(0,a._)("div",Qa,(0,r.zw)(e.$t("parent_net_profit"))+" : "+(0,r.zw)(t.row.parent_net_profit),1)]),(0,a._)("div",Va,[(0,a._)("div",$a,[(0,a.Uk)((0,r.zw)(e.$t("yoy_sales"))+" :",1),(0,a.Wm)(m,{color:t.row.yoy_sales>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",Ga,[(0,a.Uk)((0,r.zw)(e.$t("yoy_dedu_np"))+" :",1),(0,a.Wm)(m,{color:t.row.yoy_dedu_np>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_dedu_np.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",Ma,[(0,a._)("div",Pa,(0,r.zw)(e.$t("basic_eps"))+" : "+(0,r.zw)(t.row.basic_eps.toFixed(2)),1),(0,a._)("div",Da,(0,r.zw)(e.$t("cfps"))+" : "+(0,r.zw)(t.row.cfps.toFixed(2)),1)]),(0,a._)("div",Na,[(0,a._)("div",Ta,[(0,a.Uk)((0,r.zw)(e.$t("weight_avg_roe"))+" :",1),(0,a.Wm)(m,{color:t.row.weight_avg_roe>=15?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.weight_avg_roe.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",Ia,[(0,a.Uk)((0,r.zw)(e.$t("gross_profit_margin"))+" :",1),(0,a.Wm)(m,{color:t.row.gross_profit_margin>=20?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.gross_profit_margin.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",Ra,[(0,a._)("div",Ea,[(0,a.Uk)((0,r.zw)(e.$t("or_last_month"))+" :",1),(0,a.Wm)(m,{color:t.row.or_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",La,[(0,a.Uk)((0,r.zw)(e.$t("np_last_month"))+" :",1),(0,a.Wm)(m,{color:t.row.np_last_month>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",Ha,[(0,a._)("div",Aa,(0,r.zw)(e.$t("bps"))+" : "+(0,r.zw)(t.row.bps.toFixed(2)),1),(0,a._)("div",Ba,(0,r.zw)(e.$t("dividend_yield_ratio"))+" : "+(0,r.zw)(t.row.dividend_yield_ratio.toFixed(2)),1)])])),_:2},1024)])),_:2},1024)])])),_:1},8,["rows","columns","grid","onRequest","pagination"])])],64)}const Oa=(0,a.aZ)({name:"Performance",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",qdate:"",pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),performances:[],columns:[{name:"securitycode",label:"代码/名称",align:"left",field:"security_code",sortable:!0},{name:"qdate",label:"季度/时间",align:"right",field:"qdate",sortable:!0},{name:"totaloperateincome",label:"营收/利润",align:"right",field:"total_operate_income",sortable:!0},{name:"yoysales",label:"营收涨幅/利润涨幅",align:"right",field:"yoy_sales",sortable:!0},{name:"basiceps",label:"每股利润",align:"right",field:"basic_eps",sortable:!0},{name:"weightavgroe",label:"净资产收益率",align:"right",field:"weight_avg_roe",sortable:!0},{name:"orlastmonth",label:"环比增长",align:"right",field:"or_last_month",sortable:!0},{name:"bps",label:"每股现金流",align:"right",field:"bps",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0),r={security_code:this.tscode,start_date:this.qdate,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/performance/Search",r);const l=s.data;l?(this.performances=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.performances=[]},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)},latestReadDate(){let e=this.currentUser.account.lastReadDate;e||(e=new Date);let t=_e.Em.format(e,"yyyy-MM-dd");return t}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user,set:t=>{e.commit("stock/updateUser",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserTscode",t)}});return{currentUser:t,tab:o,share:r}},mounted(){this.tscode=this.share.ts_code,this.refresh()}}),Ya=(0,qe.Z)(Oa,[["render",ja]]),Ka=Ya;Re()(Oa,"components",{QPagination:Je.Z,QTable:Ve.Z,QSpace:xe.Z,QBtn:Ue.Z,QInput:Qe.Z,QTr:$e.Z,QTd:Ge.Z,QBadge:Me.Z,QCard:Fe.Z,QCardSection:Ze.Z});const Xa={class:"row justify-center q-mt-md"},Ja={class:"q-pa-md"},er={class:"row q-pa-md q-gutter-sm justify-start"},tr={class:"q-pa-xs row items-start q-gutter-md"},or={class:"row"},ar={class:"col"},rr={class:"col"},sr={class:"row"},lr={class:"col"},ir={class:"col"},nr={class:"row"},dr={class:"col"},cr={class:"col"},pr={class:"row"},ur={class:"col"},mr={class:"col"},wr={class:"row"},_r={class:"col"},hr={class:"col"},gr={class:"row"},fr={class:"col"},vr={class:"col"},yr={class:"row"},br={class:"col"},kr={class:"col"};function zr(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),d=(0,a.up)("q-space"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-td"),m=(0,a.up)("q-badge"),w=(0,a.up)("q-tr"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),g=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Xa,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",Ja,[(0,a.Wm)(g,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.expresses,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"","rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[3]||(t[3]=t=>e.pagination=t),onRequest:e.onRequest,onRowClick:e.rowClick},{top:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a._)("div",er,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"]),(0,a.Wm)(p,{outlined:"",debounce:"300",dense:"",clearable:"",modelValue:e.qdate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.qdate=t),placeholder:"季度"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])),body:(0,a.w5)((e=>[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{key:"securitycode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.security_code),1),(0,a._)("div",null,(0,r.zw)(e.row.security_name_abbr),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"qdate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.qdate),1),(0,a._)("div",null,(0,r.zw)(e.row.notice_date),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"totaloperateincome",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.total_operate_income),1),(0,a._)("div",null,(0,r.zw)(e.row.total_operate_income_sq),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"parentnetprofit",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.parent_net_profit),1),(0,a._)("div",null,(0,r.zw)(e.row.parent_net_profit_sq),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"yoysales",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_sales>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.yoy_net_profit>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.yoy_net_profit.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"basiceps",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.basic_eps.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.parent_bvps.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"orlastmonth",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.or_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.np_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",tr,[(0,a.Wm)(h,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",or,[(0,a._)("div",ar,[(0,a.Uk)((0,r.zw)(e.$t("security_code"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_code),1)])),_:2},1032,["color"])]),(0,a._)("div",rr,[(0,a.Uk)((0,r.zw)(e.$t("security_name_abbr"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_name_abbr),1)])),_:2},1032,["color"])])]),(0,a._)("div",sr,[(0,a._)("div",lr,(0,r.zw)(e.$t("qdate"))+" : "+(0,r.zw)(t.row.qdate),1),(0,a._)("div",ir,(0,r.zw)(e.$t("notice_date"))+" : "+(0,r.zw)(t.row.notice_date),1)]),(0,a._)("div",nr,[(0,a._)("div",dr,(0,r.zw)(e.$t("total_operate_income"))+":"+(0,r.zw)(t.row.total_operate_income),1),(0,a._)("div",cr,(0,r.zw)(e.$t("total_operate_income_sq"))+":"+(0,r.zw)(t.row.total_operate_income_sq),1)]),(0,a._)("div",pr,[(0,a._)("div",ur,(0,r.zw)(e.$t("parent_net_profit"))+":"+(0,r.zw)(t.row.parent_net_profit),1),(0,a._)("div",mr,(0,r.zw)(e.$t("parent_net_profit_sq"))+":"+(0,r.zw)(t.row.parent_net_profit_sq),1)]),(0,a._)("div",wr,[(0,a._)("div",_r,[(0,a.Uk)((0,r.zw)(e.$t("yoy_sales"))+":",1),(0,a.Wm)(m,{color:t.row.yoy_sales>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_sales.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",hr,[(0,a.Uk)((0,r.zw)(e.$t("yoy_net_profit"))+":",1),(0,a.Wm)(m,{color:t.row.yoy_net_profit>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.yoy_net_profit.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",gr,[(0,a._)("div",fr,[(0,a.Uk)((0,r.zw)(e.$t("or_last_month"))+":",1),(0,a.Wm)(m,{color:t.row.or_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.or_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",vr,[(0,a.Uk)((0,r.zw)(e.$t("np_last_month"))+":",1),(0,a.Wm)(m,{color:t.row.np_last_month>30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.np_last_month.toFixed(2))+"%",1)])),_:2},1032,["color"])])]),(0,a._)("div",yr,[(0,a._)("div",br,(0,r.zw)(e.$t("basic_eps"))+":"+(0,r.zw)(t.row.basic_eps.toFixed(2)),1),(0,a._)("div",kr,(0,r.zw)(e.$t("parent_bvps"))+":"+(0,r.zw)(t.row.parent_bvps.toFixed(2)),1)])])),_:2},1024)])),_:2},1024)])])),_:1},8,["rows","columns","grid","pagination","onRequest","onRowClick"])])],64)}const qr=(0,a.aZ)({name:"Express",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",qdate:"",pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),expresses:[],columns:[{name:"securitycode",label:"代码/名称",align:"left",field:"security_code",sortable:!0},{name:"qdate",label:"季度/时间",align:"right",field:"qdate",sortable:!0},{name:"totaloperateincome",label:"营收",align:"right",field:"total_operate_income",sortable:!0},{name:"parentnetprofit",label:"利润",align:"right",field:"parent_net_profit",sortable:!0},{name:"yoysales",label:"营收涨幅/利润涨幅",align:"right",field:"yoy_sales",sortable:!0},{name:"basiceps",label:"每股利润",align:"right",field:"basic_eps",sortable:!0},{name:"orlastmonth",label:"环比增长",align:"right",field:"or_last_month",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0),r={security_code:this.tscode,start_date:this.qdate,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/express/Search",r);const l=s.data;l?(this.expresses=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.expresses=[]},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}});return{tab:t,share:o}},mounted(){this.tscode=this.share.ts_code,this.refresh()}}),Wr=(0,qe.Z)(qr,[["render",zr]]),xr=Wr;Re()(qr,"components",{QPagination:Je.Z,QTable:Ve.Z,QSpace:xe.Z,QBtn:Ue.Z,QInput:Qe.Z,QTr:$e.Z,QTd:Ge.Z,QBadge:Me.Z,QCard:Fe.Z,QCardSection:Ze.Z});const Ur={class:"row justify-center q-mt-md"},Cr={class:"q-pa-md"},Sr={class:"row q-pa-md q-gutter-sm justify-start"},Fr={class:"q-pa-xs row items-start q-gutter-md"},Zr={class:"row"},Qr={class:"col"},Vr={class:"col"},$r={class:"row"},Gr={class:"col"},Mr={class:"col"},Pr={class:"row"},Dr={class:"col"},Nr={class:"row"},Tr={class:"col"},Ir={class:"row"},Rr={class:"col"},Er={class:"col"},Lr={class:"row"},Hr={class:"col"},Ar={class:"col"},Br={class:"row"},jr={class:"col"},Or={class:"col"};function Yr(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),d=(0,a.up)("q-space"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-td"),m=(0,a.up)("q-badge"),w=(0,a.up)("q-tr"),_=(0,a.up)("q-card-section"),h=(0,a.up)("q-card"),g=(0,a.up)("q-expansion-item"),f=(0,a.up)("q-list"),v=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Ur,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",Cr,[(0,a.Wm)(v,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.forecasts,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"","rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[3]||(t[3]=t=>e.pagination=t),onRequest:e.onRequest,onRowClick:e.rowClick},{top:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a._)("div",Sr,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"]),(0,a.Wm)(p,{outlined:"",debounce:"300",dense:"",clearable:"",modelValue:e.qdate,"onUpdate:modelValue":t[2]||(t[2]=t=>e.qdate=t),placeholder:"季度"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])),body:(0,a.w5)((e=>[(0,a.Wm)(w,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{key:"securitycode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.security_code),1),(0,a._)("div",null,(0,r.zw)(e.row.security_name_abbr),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"qdate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.qdate),1),(0,a._)("div",null,(0,r.zw)(e.row.notice_date),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"forecaststate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:"increase"===e.row.forecast_state?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.forecast_state),1)])),_:2},1032,["color"])]),(0,a._)("div",null,(0,r.zw)(e.row.predict_finance),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"increaseavg",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.increase_avg>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.increase_avg.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,(0,r.zw)(e.row.forecast_avg.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"predictamtlower",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.predict_amt_lower.toFixed(2)),1),(0,a._)("div",null,(0,r.zw)(e.row.predict_amt_upper.toFixed(2)),1)])),_:2},1032,["props"]),(0,a.Wm)(u,{key:"addamplower",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.add_amp_lower>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.add_amp_lower.toFixed(2))+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",null,[(0,a.Wm)(m,{color:e.row.add_amp_upper>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.row.add_amp_upper.toFixed(2))+"%",1)])),_:2},1032,["color"])])])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",Fr,[(0,a.Wm)(f,{class:"rounded-borders",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",Zr,[(0,a._)("div",Qr,[(0,a.Uk)((0,r.zw)(e.$t("security_code"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_code),1)])),_:2},1032,["color"])]),(0,a._)("div",Vr,[(0,a.Uk)((0,r.zw)(e.$t("security_name_abbr"))+" :",1),(0,a.Wm)(m,{color:t.row.security_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.security_name_abbr),1)])),_:2},1032,["color"])])]),(0,a._)("div",$r,[(0,a._)("div",Gr,(0,r.zw)(e.$t("qdate"))+" : "+(0,r.zw)(t.row.qdate),1),(0,a._)("div",Mr,(0,r.zw)(e.$t("notice_date"))+" : "+(0,r.zw)(t.row.notice_date),1)]),(0,a._)("div",Pr,[(0,a._)("div",Dr,[(0,a.Uk)((0,r.zw)(e.$t("forecast_state"))+":",1),(0,a.Wm)(m,{color:"increase"===t.row.forecast_state?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.forecast_state),1)])),_:2},1032,["color"])])]),(0,a._)("div",Nr,[(0,a._)("div",Tr,(0,r.zw)(e.$t("predict_finance"))+":"+(0,r.zw)(t.row.predict_finance),1)]),(0,a._)("div",Ir,[(0,a._)("div",Rr,[(0,a.Uk)((0,r.zw)(e.$t("increase_avg"))+":",1),(0,a.Wm)(m,{color:t.row.increase_avg>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.increase_avg)+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",Er,(0,r.zw)(e.$t("forecast_avg"))+":"+(0,r.zw)(t.row.forecast_avg),1)]),(0,a._)("div",Lr,[(0,a._)("div",Hr,(0,r.zw)(e.$t("predict_amt_lower"))+":"+(0,r.zw)(t.row.predict_amt_lower),1),(0,a._)("div",Ar,(0,r.zw)(e.$t("predict_amt_upper"))+":"+(0,r.zw)(t.row.predict_amt_upper),1)]),(0,a._)("div",Br,[(0,a._)("div",jr,[(0,a.Uk)((0,r.zw)(e.$t("add_amp_lower"))+":",1),(0,a.Wm)(m,{color:t.row.add_amp_lower>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.add_amp_lower)+"%",1)])),_:2},1032,["color"])]),(0,a._)("div",Or,[(0,a.Uk)((0,r.zw)(e.$t("add_amp_upper"))+":",1),(0,a.Wm)(m,{color:t.row.add_amp_upper>=30?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.add_amp_upper)+"%",1)])),_:2},1032,["color"])])])])),_:2},1024)])),_:2},1024),(0,a.Wm)(g,{"expand-separator":"",icon:"perm_identity",label:e.$t("more")},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{width:"360px","max-width":"100%"},class:(0,r.C_)(t.row.security_code==e.share.ts_code?"bg-primary text-c-grey-1":"")},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.$t("predict_content"))+":"+(0,r.zw)(t.row.predict_content),1),(0,a._)("div",null,(0,r.zw)(e.$t("change_reason_explain"))+":"+(0,r.zw)(t.row.change_reason_explain),1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["label"])])),_:2},1024)])])),_:1},8,["rows","columns","grid","pagination","onRequest","onRowClick"])])],64)}const Kr=(0,a.aZ)({name:"Forecast",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",qdate:"",pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),forecasts:[],columns:[{name:"securitycode",label:"代码/名称",align:"left",field:"security_code",sortable:!0},{name:"qdate",label:"季度/时间",align:"right",field:"qdate",sortable:!0},{name:"forecaststate",label:"预测状态/项目",align:"right",field:"forecast_state",sortable:!0},{name:"increaseavg",label:"增长均值",align:"right",field:"increase_avg",sortable:!0},{name:"predictamtlower",label:"增长低高限",align:"right",field:"predict_amt_lower",sortable:!0},{name:"addamplower",label:"增长率低高限",align:"right",field:"add_amp_lower",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0),r={security_code:this.tscode,start_date:this.qdate,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/forecast/Search",r);const l=s.data;l?(this.forecasts=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.forecasts=[]},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}});return{tab:t,share:o}},mounted(){this.tscode=this.share.ts_code,this.refresh()}}),Xr=(0,qe.Z)(Kr,[["render",Yr]]),Jr=Xr;Re()(Kr,"components",{QPagination:Je.Z,QTable:Ve.Z,QSpace:xe.Z,QBtn:Ue.Z,QInput:Qe.Z,QTr:$e.Z,QTd:Ge.Z,QBadge:Me.Z,QList:Po.Z,QCard:Fe.Z,QCardSection:Ze.Z,QExpansionItem:Do.Z});const es={class:"row justify-center q-mt-md"},ts={class:"q-pa-md"},os={class:"row q-pa-md q-gutter-sm justify-start"},as={class:"col-12"},rs={class:"col-12"},ss={class:"col-12"},ls={class:"col-12"},is={class:"q-pa-xs row items-start q-gutter-md"},ns={class:"row"},ds={class:"col"},cs={class:"col"},ps={class:"row"},us={class:"col"},ms={class:"row"},ws={class:"col"},_s={class:"col"},hs={class:"row"},gs={class:"col"},fs={class:"col"},vs={class:"row"},ys={class:"col"};function bs(e,t,o,s,l,i){const n=(0,a.up)("q-pagination"),c=(0,a.up)("q-btn"),p=(0,a.up)("q-input"),u=(0,a.up)("q-option-group"),m=(0,a.up)("q-slide-transition"),w=(0,a.up)("q-td"),_=(0,a.up)("q-tr"),h=(0,a.up)("q-badge"),g=(0,a.up)("q-card-section"),f=(0,a.up)("q-card"),v=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",es,[(0,a.Wm)(n,{modelValue:e.pagination.page,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.pagination.page=t),e.onPage],max:e.pagesNumber,"max-pages":6},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a._)("div",ts,[(0,a.Wm)(v,{class:"sticky-header-column-table","virtual-scroll-sticky-size-start":48,flat:"",dense:"",rows:e.eventConds,columns:e.columns,grid:e.isGrid,"row-key":"id",separator:"none","card-container-class":"items-start justify-center content-center","virtual-scroll":"","hide-pagination":"","rows-per-page-options":[0],pagination:e.pagination,"onUpdate:pagination":t[6]||(t[6]=t=>e.pagination=t),onRequest:e.onRequest,onRowClick:e.rowClick},{top:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(c,{class:"btnIcon",flat:"",color:"primary",icon:e.isGrid?"grid_on":"list",onClick:e.switchGrid},null,8,["icon","onClick"]),(0,a.Wm)(c,{dense:"",flat:"",color:"primary",icon:e.condExpanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:t[1]||(t[1]=t=>e.condExpanded=!e.condExpanded)},null,8,["icon"]),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",null,[(0,a._)("div",os,[(0,a._)("div",as,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tscode,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tscode=t),placeholder:"股票代码"},null,8,["modelValue"])]),(0,a._)("div",rs,[(0,a.Wm)(u,{modelValue:e.eventCode,"onUpdate:modelValue":t[3]||(t[3]=t=>e.eventCode=t),options:e.eventCodeOptions,color:"primary",inline:"",dense:"",type:"radio"},null,8,["modelValue","options"])]),(0,a._)("div",ss,[(0,a.Wm)(u,{modelValue:e.eventType,"onUpdate:modelValue":t[4]||(t[4]=t=>e.eventType=t),options:e.eventTypeOptions,color:"primary",inline:"",dense:"",type:"radio"},null,8,["modelValue","options"])]),(0,a._)("div",ls,[(0,a.Wm)(p,{outlined:"",dense:"",clearable:"",modelValue:e.tradeDate,"onUpdate:modelValue":t[5]||(t[5]=t=>e.tradeDate=t),modelModifiers:{number:!0},placeholder:"日期"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"","no-caps":"",flat:"",color:"primary",icon:"search",unelevated:"",onClick:e.refresh},null,8,["onClick"])])),_:1},8,["modelValue"])])])],512),[[d.F8,e.condExpanded]])])),_:1})])])),body:(0,a.w5)((e=>[(0,a.Wm)(_,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{key:"tscode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.ts_code),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"name",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"tradedate",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.trade_date),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventcode",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.event_code),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventname",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.event_name),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"eventtype",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.event_type),1)])),_:2},1032,["props"]),(0,a.Wm)(w,{key:"score",props:e},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,r.zw)(e.row.score),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),item:(0,a.w5)((t=>[(0,a._)("div",is,[(0,a.Wm)(f,{style:{width:"340px","max-width":"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a._)("div",ns,[(0,a._)("div",ds,[(0,a.Uk)((0,r.zw)(e.$t("ts_code"))+" :",1),(0,a.Wm)(h,{color:t.row.ts_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.ts_code),1)])),_:2},1032,["color"])]),(0,a._)("div",cs,(0,r.zw)(e.$t("name"))+":"+(0,r.zw)(t.row.name),1)]),(0,a._)("div",ps,[(0,a._)("div",us,[(0,a.Uk)((0,r.zw)(e.$t("trade_date"))+" :",1),(0,a.Wm)(h,{color:t.row.ts_code==e.share.ts_code?"primary":""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.trade_date),1)])),_:2},1032,["color"])])]),(0,a._)("div",ms,[(0,a._)("div",ws,(0,r.zw)(e.$t("event_code"))+":"+(0,r.zw)(t.row.event_code),1),(0,a._)("div",_s,(0,r.zw)(e.$t("event_name"))+":"+(0,r.zw)(t.row.event_name),1)]),(0,a._)("div",hs,[(0,a._)("div",gs,[(0,a.Uk)((0,r.zw)(e.$t("event_type"))+":",1),(0,a.Wm)(h,{color:"in"===t.row.event_type?"red":"green"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(t.row.event_type),1)])),_:2},1032,["color"])]),(0,a._)("div",fs,(0,r.zw)(e.$t("score"))+":"+(0,r.zw)(t.row.score),1)]),(0,a._)("div",vs,[(0,a._)("div",ys,(0,r.zw)(e.$t("descr"))+":"+(0,r.zw)(t.row.descr),1)])])),_:2},1024)])),_:2},1024)])])),_:1},8,["rows","columns","grid","pagination","onRequest","onRowClick"])])],64)}const ks=(0,a.aZ)({name:"EventCond",data(){return{isGrid:this.isMobile(),queryChanged:!0,tscode:"",tradeDate:0,condExpanded:!1,eventConds:[],eventCode:(0,pe.iH)(""),eventCodeOptions:[{label:"红杏出墙",value:"RedApricots",type:"in"},{label:"三箭齐发",value:"ThreeArrow",type:"in"},{label:"鸿雁南回",value:"SwanSouth",type:"in"},{label:"一剑穿心",value:"SwordHeart",type:"out"},{label:"惊鸿照影",value:"GreenShadow",type:"out"},{label:"有心无力",value:"HeartPower",type:"out"},{label:"虚张声势",value:"DeerTrap",type:"out"},{label:"石破天惊",value:"StoneSky",type:"out"}],eventType:(0,pe.iH)(""),eventTypeOptions:[{label:"买",value:"in"},{label:"卖",value:"out"}],pagination:(0,pe.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:10,rowsNumber:0}),columns:[{name:"tscode",label:"代码",align:"left",field:"ts_code",sortable:!0},{name:"name",label:"名称",align:"left",field:"name",sortable:!0},{name:"tradedate",label:"时间",align:"right",field:"trade_date",sortable:!0},{name:"eventcode",label:"事件代码",align:"right",field:"event_code",sortable:!0},{name:"eventname",label:"事件名称",align:"right",field:"event_name",sortable:!0},{name:"eventtype",label:"事件类型",align:"right",field:"event_type",sortable:!0},{name:"score",label:"评分",align:"right",field:"score",sortable:!0}]}},methods:{onRequest(e){he.v.setQuasarPage(e.pagination,this.pagination),this.refresh()},onPage(e){this.refresh()},async refresh(){let{orderby:e,from:t,limit:o,count:a}=he.v.prepareDatastorePage(this.pagination,!0);if(o>0){let r={ts_code:this.tscode,start_date:this.tradeDate,end_date:this.tradeDate,event_code:this.eventCode,event_type:this.eventType,from:t,limit:o,orderby:e,count:a},s=await ue.u.send("/eventcond/FindGroupby",r);const l=s.data;l?(this.eventConds=l.data,l.count&&(this.pagination.rowsNumber=l.count),this.queryChanged=!1):this.eventConds=[]}},isMobile(){return he.v.isMobile()},switchGrid(){this.isGrid=!this.isGrid}},computed:{isMobile(){return he.v.isMobile()},pagesNumber(){return Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage)}},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user,set:t=>{e.commit("stock/updateUser",t)}});return{tab:t,share:o,currentUser:r}},mounted(){this.tscode=this.currentUser.subscription,this.refresh()}}),zs=(0,qe.Z)(ks,[["render",bs]]),qs=zs;Re()(ks,"components",{QPagination:Je.Z,QTable:Ve.Z,QBtn:Ue.Z,QSlideTransition:Ce.Z,QInput:Qe.Z,QOptionGroup:De.Z,QTr:$e.Z,QTd:Ge.Z,QCard:Fe.Z,QCardSection:Ze.Z,QBadge:Me.Z});const Ws=(0,a.aZ)({name:"HistoryEvent",components:{Performance:Ka,Express:xr,Forecast:Jr,EventCond:qs},data(){return{kind:"inout"}},methods:{},computed:{},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserTscode",t)}});return{tab:t,share:o}},mounted(){}}),xs=(0,qe.Z)(Ws,[["render",va]]),Us=xs;Re()(Ws,"components",{QTabs:ma.Z,QTab:wa.Z,QTabPanels:_a.Z,QTabPanel:ha.Z});const Cs=(0,a.aZ)({name:"Me",components:{SelfSelection:Le,ShareSearch:tt,LatestEvent:fa,HistoryEvent:Us},data(){return{}},methods:{previous(){this.currentIndex=this.currentIndex-1},next(){this.currentIndex=this.currentIndex+1}},computed:{},setup(){const e=(0,n.useStore)(),t=(0,a.Fl)({get:()=>e.state.stock.user.tab,set:t=>{e.commit("stock/updateUserTab",t)}}),o=(0,a.Fl)({get:()=>e.state.stock.user.share,set:t=>{e.commit("stock/updateUserShare",t)}}),r=(0,a.Fl)({get:()=>e.state.stock.user.currentIndex,set:t=>{e.commit("stock/updateUserCurrentIndex",t)}}),s=(0,a.Fl)({get:()=>e.state.stock.user.terms,set:t=>{e.commit("stock/updateUserTerms",t)}}),l=(0,a.Fl)({get:()=>e.state.stock.user.shares,set:t=>{e.commit("stock/updateUserShares",t)}});return{tab:t,share:o,terms:s,shares:l,currentIndex:r}}}),Ss=(0,qe.Z)(Cs,[["render",i]]),Fs=Ss;Re()(Cs,"components",{QToolbar:We.Z,QSpace:xe.Z,QBtn:Ue.Z,QTabs:ma.Z,QTab:wa.Z,QTabPanels:_a.Z,QTabPanel:ha.Z,QToolbarTitle:Xe.Z})}}]);